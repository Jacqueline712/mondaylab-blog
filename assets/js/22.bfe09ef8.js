(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{570:function(e,a,t){"use strict";t.r(a);var s=t(13),_=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),t("p",[e._v("平常做完项目都很少自己部署，但是感觉作为一个开发者不会部署有点过不去，于是询问了身边的小伙伴一波，做出以下总结。")]),e._v(" "),t("h1",{attrs:{id:"一、概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、概述"}},[e._v("#")]),e._v(" 一、概述")]),e._v(" "),t("p",[t("strong",[e._v("本文将从以下三个个方面来讲解：")]),e._v("\n配置 oneinstack\n将 nodejs 项目上传至服务器\n使用 pm2 运行 nodejs 项目")]),e._v(" "),t("h1",{attrs:{id:"二、具体步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、具体步骤"}},[e._v("#")]),e._v(" 二、具体步骤")]),e._v(" "),t("h2",{attrs:{id:"_1、拥有自己的服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、拥有自己的服务器"}},[e._v("#")]),e._v(" 1、拥有自己的服务器")]),e._v(" "),t("p",[e._v("先到阿里云买一台学生机，买完以后记得到控制台重置密码，密码设置的尽可能的复杂；")]),e._v(" "),t("h2",{attrs:{id:"_2、下载-xshell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、下载-xshell"}},[e._v("#")]),e._v(" 2、下载 Xshell")]),e._v(" "),t("p",[e._v("之后需要到 Xshell 官方网站下载"),t("a",{attrs:{href:"https://www.netsarang.com/en/xshell-download/",target:"_blank",rel:"noopener noreferrer"}},[e._v("XShell"),t("OutboundLink")],1),e._v("；")]),e._v(" "),t("h2",{attrs:{id:"_3、-oneinstack-配置-web-环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、-oneinstack-配置-web-环境"}},[e._v("#")]),e._v(" 3、 oneinstack 配置 web 环境")]),e._v(" "),t("p",[e._v("用"),t("a",{attrs:{href:"https://oneinstack.com/auto/",target:"_blank",rel:"noopener noreferrer"}},[e._v("oneinstack"),t("OutboundLink")],1),e._v("配 web 环境，具体配置如下：\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210207165920591.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#",alt:"在这里插入图片描述"}})]),e._v(" "),t("h2",{attrs:{id:"_4、-xshell-连接远程主机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、-xshell-连接远程主机"}},[e._v("#")]),e._v(" 4、 XShell 连接远程主机")]),e._v(" "),t("p",[e._v("配置完以后，XShell 连接远程主机；\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210207165928878.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#",alt:"在这里插入图片描述"}})]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210207165939603.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#",alt:"在这里插入图片描述"}})]),e._v(" "),t("h2",{attrs:{id:"_5、更新系统软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、更新系统软件"}},[e._v("#")]),e._v(" 5、更新系统软件")]),e._v(" "),t("p",[e._v("连接完成之后， "),t("code",[e._v("XShell")]),e._v(" 控制台上的小红点会变成小绿点，显示小绿点即表示连接成功，如果还是小红点则说明连接失败，需重返检查下原来的配置是否有错误，及时纠正。\n成功连接后， "),t("code",[e._v("XShell")]),e._v(" 控制台输入"),t("code",[e._v("yum update -y")]),e._v("来更新系统软件，更新完成之后，将第三步 "),t("code",[e._v("oneinstack")]),e._v(" 最底部生成的安装命令粘贴继续粘贴进控制台，稍等片刻，将完成重置和登录。")]),e._v(" "),t("h2",{attrs:{id:"_6、在服务器上安装-node-环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、在服务器上安装-node-环境"}},[e._v("#")]),e._v(" 6、在服务器上安装 node 环境")]),e._v(" "),t("p",[e._v("登录之后，我们需要在服务器安装一个 node 环境。这里需要注意的一点是，如果需求没有很大的话，用命令"),t("code",[e._v("yum install -y nodejs")]),e._v("在 "),t("code",[e._v("XShell")]),e._v(" 控制台即可直接安装，但是 "),t("code",[e._v("XShell")]),e._v(" 里面的版本是在比较低，比如我安装的时候是 "),t("code",[e._v("10.21.0")]),e._v(" ，实际上 "),t("code",[e._v("node")]),e._v(" 已经出到 14 版本了，所以建议是手动安装。接下来讲解在服务器手动安装最新版本 nodejs 环境的做法：")]),e._v(" "),t("p",[t("strong",[e._v("①")]),e._v("首先需要在本地下载 nodejs 最新版本，在"),t("a",{attrs:{href:"https://nodejs.org/en/download/",target:"_blank",rel:"noopener noreferrer"}},[e._v("node 官网"),t("OutboundLink")],1),e._v("下载服务器能够运行的版本，因为我的是 centOS 系统，选择 linux Binaries(x64)。")]),e._v(" "),t("p",[t("strong",[e._v("PS")]),e._v(" ：不要像我一样傻以为是在本地安装一个 "),t("code",[e._v("node")]),e._v(" 环境，本地的 "),t("code",[e._v("node")]),e._v(" 环境和远程的 "),t("code",[e._v("node")]),e._v(" 环境完全不是同一个东西。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210207173124388.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#",alt:"在这里插入图片描述"}})]),e._v(" "),t("hr"),e._v(" "),t("p",[t("strong",[e._v("②")]),e._v("在本地下载完成后，需要将安装包（即压缩包文件）复制到服务器里面，如何复制呢，这个根据个人需求传到服务器对应的路径下。（ "),t("code",[e._v("windows")]),e._v(" 系统推荐使用"),t("strong",[e._v("winscp 软件")]),e._v("或者"),t("strong",[e._v("Xftp 软件")]),e._v("进行上传，速度很快）")]),e._v(" "),t("p",[t("strong",[e._v("③")]),e._v("上传后，在服务端进行解压，这里需要用命令行在 XShell 里面进行解压。（注意：node-v14.15.4-linux-x64.tar.xz 是你 node 安装包的名字）\n解压思路是：需要先将 xz 文件解压成 tar 文件，之后将 tar 文件解压成文件夹完成解压")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("xz -d node-v14.15.4-linux-x64.tar.xz\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" -xvf node-v14.15.4-linux-x64.tar\n")])])]),t("p",[t("strong",[e._v("④")]),e._v("解压后，将 node 文件夹下的所有内容复制到/usr/local/node，配置环境变量。这里路径/usr/local/node 下的 node 文件需要新建，用"),t("code",[e._v("mkdir -p 路径名")]),e._v("可以直接建立路径下的文件夹。")]),e._v(" "),t("p",[t("strong",[e._v("⑤")]),e._v("配置环境变量。linux 的环境变量文件是/etc/profile，可执行文件在/usr/local/node/bin 里，所以要把这个路径加入到这个环境变量文件中。")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("vi")]),e._v(" /etc/profile\n")])])]),t("p",[e._v("输入命令后进入界面，再输入 i 进入编辑模式，PageDown 到最后一行，不换行，添加环境变量。")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" /usr/local/node/bin\n")])])]),t("p",[t("strong",[e._v("⑥")]),e._v("保存退出。")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("ESC\nShift zz\n")])])]),t("p",[e._v("⑦ 保存退出后执行如下命令，将环境变量生效。")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("source")]),e._v(" /etc/profile\n")])])]),t("p",[t("strong",[e._v("⑧")]),e._v("装完之后"),t("code",[e._v("node -v")]),e._v("查看版本号是否一一对应。")]),e._v(" "),t("h2",{attrs:{id:"_7、部署项目到服务器上"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7、部署项目到服务器上"}},[e._v("#")]),e._v(" 7、部署项目到服务器上")]),e._v(" "),t("p",[e._v("安装完 "),t("code",[e._v("node")]),e._v(" 环境，接下来需要把我们的项目部署到服务器上。（这里介绍从 "),t("code",[e._v("git")]),e._v(" 上拉项目到服务器上）\n① 先到 "),t("code",[e._v("/home")]),e._v(" 下面创建一个属于你自己用户名的文件夹，比如名字为 "),t("code",[e._v("monday")]),e._v(" ，那么就会有 "),t("code",[e._v("/home/monday")]),e._v(" ，之后把自己的项目文件克隆到 monday 文件下，为 "),t("code",[e._v("/home/monday/project-name")]),e._v(" 。\n② 进入自己用户名的文件夹，"),t("code",[e._v("git clone")]),e._v(" 你的项目地址，之后 "),t("code",[e._v("npm i")]),e._v(" 。\n③ 上传 "),t("code",[e._v("nodejs")]),e._v(" 项目后，配置数据库。")]),e._v(" "),t("h2",{attrs:{id:"_8、安装-pm2-并启动-nodejs-项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8、安装-pm2-并启动-nodejs-项目"}},[e._v("#")]),e._v(" 8、安装 pm2 并启动 nodejs 项目")]),e._v(" "),t("p",[t("strong",[e._v("①")]),e._v("使用 npm 全局安装 pm2："),t("code",[e._v("npm install pm2 -g")]),e._v("；\n"),t("strong",[e._v("②")]),e._v("进入 nodejs 项目目录，我把项目上传到了 "),t("code",[e._v("/home/monday/project-name")]),e._v(" ，所以,输入"),t("code",[e._v("cd /home/monday/project-name")]),e._v(" 的项目目录回车，进入项目目录启动 nodejs 项目，看个人对自己项目的设计来决定启动方式，我的是"),t("code",[e._v("npm run prd")]),e._v("；\n"),t("strong",[e._v("③")]),e._v("检查 nodejs 项目是否启动：输入 pm2 list 回车，如果出现下面的列表，就说明 "),t("code",[e._v("nodejs")]),e._v(" 项目已经顺利在后台建立了服务。\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210207193720217.png#pic_center",alt:"在这里插入图片描述"}}),e._v("\n至此，我们就把服务启动起来啦！")]),e._v(" "),t("h1",{attrs:{id:"三、快捷指令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、快捷指令"}},[e._v("#")]),e._v(" 三、快捷指令")]),e._v(" "),t("h2",{attrs:{id:"_1、linux-的常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、linux-的常用命令"}},[e._v("#")]),e._v(" 1、linux 的常用命令")]),e._v(" "),t("ul",[t("li",[e._v("rm -rf 目录 删除目录")]),e._v(" "),t("li",[e._v("cp -R conf.example conf 复制 conf.example（已存在文件）为 conf（未存在）")]),e._v(" "),t("li",[e._v("curl http://www.linux.com 用于测试一台服务器是否可以到达一个网站")]),e._v(" "),t("li",[e._v("①yum install screen -y；②screen -S lnmp 用于解决连接非正常中断，重新连接会话")])]),e._v(" "),t("h2",{attrs:{id:"_2、pm2-的常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、pm2-的常用命令"}},[e._v("#")]),e._v(" 2、pm2 的常用命令")]),e._v(" "),t("ul",[t("li",[e._v("pm2 list——查看进程列表")]),e._v(" "),t("li",[e._v("pm2 restart 0——重启服务")]),e._v(" "),t("li",[e._v("pm2 stop 0——停止服务")]),e._v(" "),t("li",[e._v("pm2 delete 0——停止后要对进程进行删除")]),e._v(" "),t("li",[e._v("pm2 info 0——可以查看当前进程的所有信息以及一些录像")]),e._v(" "),t("li",[e._v("pm2 log 0——查看日志")]),e._v(" "),t("li",[e._v("pm2 monit——监控进程列表")])])])}),[],!1,null,null,null);a.default=_.exports}}]);