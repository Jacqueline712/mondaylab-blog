<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>万字总结webpack实战案例配置 | 星期一研究室mondaylab</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="分享前沿学习干货，不止前端">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/mondaylab-blog/assets/css/0.styles.4ac1ff55.css" as="style"><link rel="preload" href="/mondaylab-blog/assets/js/app.c88a0deb.js" as="script"><link rel="preload" href="/mondaylab-blog/assets/js/3.88ba4622.js" as="script"><link rel="preload" href="/mondaylab-blog/assets/js/1.4561d677.js" as="script"><link rel="preload" href="/mondaylab-blog/assets/js/65.05ea22b8.js" as="script"><link rel="prefetch" href="/mondaylab-blog/assets/js/10.034a7746.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/100.10819cfc.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/101.08435226.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/102.3c743ae4.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/103.0899af72.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/104.9740a7b0.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/105.354ffeca.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/106.f96e9c97.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/107.fdaf8145.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/108.873b7b71.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/109.a7ed1971.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/11.cd4ede8c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/110.595203fe.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/111.0592463f.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/112.d589d41f.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/113.a515fec2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/114.b24422e9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/115.ca926b85.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/116.f37030bd.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/117.0ffabc20.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/118.a6d0c7be.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/119.98f6dc2b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/12.ce83912b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/120.6eacd5bb.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/121.fa7b4ea6.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/122.7d46ca50.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/123.1cd24964.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/124.1d531d04.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/125.6a6cb385.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/126.6b264559.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/127.5a899da7.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/128.8a78b191.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/129.6aae946e.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/13.2d9d90c3.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/130.1a926e98.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/131.84f62c2a.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/132.bb4c461b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/133.6903387d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/134.cdc38ea8.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/135.9b4487ab.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/136.0b7a9b37.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/137.637569aa.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/138.07e50d9c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/139.7541018f.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/14.d89e9816.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/15.dfc52afe.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/16.00a7eb7f.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/17.e68c0c14.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/18.53ca7f65.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/19.a0a92c25.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/20.ffb14e53.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/21.c1febef9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/22.8b4c7a06.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/23.83c451b0.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/24.f4252c0c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/25.9cc0424c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/26.ea9b4ec2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/27.e95d6d00.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/28.cc7aa797.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/29.eccf6e0c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/30.e1a43b09.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/31.a3ee8c6b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/32.ff171a84.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/33.b77f11f2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/34.19d1bb45.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/35.d898aa4b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/36.fd540d6c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/37.689cfa17.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/38.ab0fe1d2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/39.4982c373.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/4.5fce2cb1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/40.fbd23895.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/41.1ee65302.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/42.e4e1fd1b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/43.16cc67bf.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/44.339c086a.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/45.23e9054d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/46.0ba554df.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/47.a1b4f174.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/48.74e8cab9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/49.28b640a2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/5.41f6904b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/50.123c3dc4.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/51.0786fa45.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/52.e0ac9d17.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/53.6150f1a8.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/54.5805fae7.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/55.edaacdd5.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/56.22dc82a1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/57.e6a3430a.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/58.947b40de.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/59.fa5bf342.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/6.3b3e9e8b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/60.1eb9a904.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/61.be086da9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/62.4f171d5c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/63.636b8f33.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/64.5185410c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/66.7ea55611.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/67.3d6ec0cb.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/68.428e4a59.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/69.b963a919.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/7.01286607.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/70.7de5c8c1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/71.21ac06d2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/72.edfbec65.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/73.a1aff9ec.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/74.636c5d41.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/75.d7b9a479.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/76.f4beadf1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/77.400e1f1d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/78.051119d3.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/79.f5cab9df.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/8.b3bf0af5.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/80.4ca8a547.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/81.3bdf1a92.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/82.40488883.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/83.27be1ce9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/84.34a9e70b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/85.c2797db6.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/86.6627a121.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/87.23aa101d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/88.4ec547cf.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/89.07aa035b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/9.27bc3278.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/90.dbbcb0e3.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/91.1fd63f6c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/92.f84e54e2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/93.14a0f0ce.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/94.978c1d5b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/95.a8c6646d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/96.701c6066.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/97.2553a7ef.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/98.f49acaf7.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/99.ca2475c7.js">
    <link rel="stylesheet" href="/mondaylab-blog/assets/css/0.styles.4ac1ff55.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>星期一研究室mondaylab</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>分享前沿学习干货，不止前端</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>SyllableCheng</span>
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mondaylab-blog/" class="home-link router-link-active"><img src="/mondaylab-blog/avatar.png" alt="星期一研究室mondaylab" class="logo"> <span class="site-name">星期一研究室mondaylab</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mondaylab-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-tag"></i>
      精选专栏
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Algorithm/" class="nav-link"><i class="undefined"></i>
  数构与前端
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Interview/" class="nav-link"><i class="undefined"></i>
  offer来了
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-eye"></i>
      干货社区
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Learning/" class="nav-link"><i class="undefined"></i>
  快捷键
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Learning/" class="nav-link"><i class="undefined"></i>
  Notion模板
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类索引
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Product/" class="nav-link"><i class="undefined"></i>
  产品汪
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/FrontEnd/" class="nav-link router-link-active"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/OtherLang/" class="nav-link"><i class="undefined"></i>
  其他语言
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/BackEnd/" class="nav-link"><i class="undefined"></i>
  服务端开发
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/ComputerKnowledge/" class="nav-link"><i class="undefined"></i>
  计算机基础知识
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Growing/" class="nav-link"><i class="undefined"></i>
  碎碎念个人成长
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Jacqueline712" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3131845139247960/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_44803753" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.infoq.cn/profile/3AC1A95FEC468A/publish" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  InfoQ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/zheng-zi-ji-67-89/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/mondaylab-blog/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    SyllableCheng
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>128</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>25</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/mondaylab-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-tag"></i>
      精选专栏
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Algorithm/" class="nav-link"><i class="undefined"></i>
  数构与前端
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Interview/" class="nav-link"><i class="undefined"></i>
  offer来了
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-eye"></i>
      干货社区
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Learning/" class="nav-link"><i class="undefined"></i>
  快捷键
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Learning/" class="nav-link"><i class="undefined"></i>
  Notion模板
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类索引
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Product/" class="nav-link"><i class="undefined"></i>
  产品汪
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/FrontEnd/" class="nav-link router-link-active"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/OtherLang/" class="nav-link"><i class="undefined"></i>
  其他语言
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/BackEnd/" class="nav-link"><i class="undefined"></i>
  服务端开发
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/ComputerKnowledge/" class="nav-link"><i class="undefined"></i>
  计算机基础知识
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Growing/" class="nav-link"><i class="undefined"></i>
  碎碎念个人成长
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Jacqueline712" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3131845139247960/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_44803753" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.infoq.cn/profile/3AC1A95FEC468A/publish" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  InfoQ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/zheng-zi-ji-67-89/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue.js原理解析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Webpack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mondaylab-blog/column/FrontEnd/Webpack/001.html" class="sidebar-link">001-webpack超入门核心知识</a></li><li><a href="/mondaylab-blog/column/FrontEnd/Webpack/002.html" class="sidebar-link">002-webpack入门进阶知识</a></li><li><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html" aria-current="page" class="active sidebar-link">003-手写一个loader和plugin</a></li><li><a href="/mondaylab-blog/column/FrontEnd/Webpack/004.html" class="sidebar-link">004-webpack实战案例配置</a></li><li><a href="/mondaylab-blog/column/FrontEnd/Webpack/005.html" class="sidebar-link">005-手写bundler打包工具</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3+ts组件库开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>实战类</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>青训营YouthCamp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>掘金翻译计划</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>万字总结webpack实战案例配置</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>SyllableCheng</span>
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">万字总结webpack实战案例配置</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>周一</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>8/4/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>Webpack</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="🛴-序言"><a href="#🛴-序言" class="header-anchor">#</a> 🛴 序言</h1> <p>在<a href="https://blog.csdn.net/weixin_44803753/category_11123550.html?spm=1001.2014.3001.5482" target="_blank" rel="noopener noreferrer">前面的两篇文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中，我们讲解了 <code>webpack</code> 的入门知识。但是呢，入门知识了解了之后，总得应用到具体的案例当中来。</p> <p>因此，在下面的这篇文章中，将带领大家来了解关于 <code>webpack</code> 的一些实战案例配置，包括第三方库、 <code>PWA</code> 、 <code>ts</code> 的打包配置，以及 <code>WebpackDevServer</code> 的进阶操作，还有需重点掌握的，关于 <code>webpack</code> 如何做性能优化处理这个问题。</p> <p>下面开始本文的介绍~🚦</p> <h1 id="🚌-一、library-的打包"><a href="#🚌-一、library-的打包" class="header-anchor">#</a> 🚌 一、Library 的打包</h1> <p>假设我们现在要开发一个组件库或者一个函数库时，对于这样的库代码，我们应该如何让 <code>webpack</code> 来进行打包呢？</p> <h2 id="_1-webpack-打包库"><a href="#_1-webpack-打包库" class="header-anchor">#</a> 1. webpack 打包库</h2> <p>假如我们现在写了很多逻辑代码，同时呢，我们将这些逻辑代码进行打包，打包之后它全部生成在 <code>dist</code> 文件夹下的 <code>mondaylib.js</code> 文件中。</p> <p>好了，现在这个库生成了。那如何让我们的用户，来引入 <code>mondaylib</code> 这个库呢？</p> <p>一般情况下，别人引入我们的库的方法，<strong>具体有以下几种方式：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//方式一</span>
<span class="token keyword">import</span> mondaylib <span class="token keyword">from</span> <span class="token string">'mondaylib'</span><span class="token punctuation">;</span>
<span class="token comment">//方式二</span>
<span class="token keyword">const</span> mondaylib <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mondaylib'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//方式三</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'mondaylib'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>所以，如果想让我们的用户来引入这个库，我们需要在 <code>webpack.config.js</code> 下进行配置。<strong>具体配置如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'mondaylib.js'</span><span class="token punctuation">,</span>
    <span class="token comment">//此处配置libraryTarget，umd表示支持commonJS这种语法</span>
    <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">'umd'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>libraryTarget: 'umd'</code> 表示支持 <code>commonJS</code> 这种语法，因此可以引入上面三种方式。同时， <code>libraryTarget</code> 也可以设置为其他值，比如 <code>this</code> 和 <code>window</code> 。</p> <p><code>libraryTarget: 'this'</code> 的意思为，我要让 <code>mondaylib</code> 这个变量，挂载到页面上。 <code>libraryTarget: 'window'</code> 则表示为， <code>mondaylib</code> 这个变量，将挂载到 <code>window</code> 上。</p> <hr> <p>除了以上三种情况，还有另外特殊情况，<strong>具体如下：</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mondaylib.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>此时我们需要在 <code>webpack.config.js</code> 中进行<strong>以下配置：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'mondaylib.js'</span><span class="token punctuation">,</span>
    <span class="token comment">//将打包生成的代码挂载到页面的全局变量上</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">'mondaylib'</span><span class="token punctuation">,</span>
    <span class="token comment">//此处配置libraryTarget，umd表示支持commonJS这种语法</span>
    <span class="token literal-property property">libraryTarget</span><span class="token operator">:</span> <span class="token string">'umd'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>其中，第一个 <code>library</code> 是属性值，第二个 <code>mondaylib</code> 是我们的库名，这个配置的意思为，将打包生成的代码，即 <code>mondaylib.js</code> 这个库，给挂载到全局的变量上。</p> <h2 id="_2-库引用冲突"><a href="#_2-库引用冲突" class="header-anchor">#</a> 2. 库引用冲突</h2> <p>假设现在，我们在上面 <code>mondaylib</code> 这个库中，引入了 <code>lodash</code> 这个库。然后呢，当用户使用的时候，用户又再引入了一次 lodash 这个库。像下面代码这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
<span class="token comment">//mondaylib这个库原先已经引入过lodash这个库</span>
<span class="token keyword">import</span> mondaylib <span class="token keyword">from</span> <span class="token string">'mondaylib'</span><span class="token punctuation">;</span>
</code></pre></div><p>所以现在，我们该如何来避免这种问题发生呢？我们再 <code>webpack.config.js</code> 中进行配置，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'lodash'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>从以上代码中我们可以知道，通过 <code>externals: [&quot;lodash&quot;]</code> 这个配置，来告诉 <code>webpack</code> ，告诉它说，如果在打包过程中， <code>mondaylib</code> 这个库中如果有遇到 <code>lodash</code> 这个库，那么就避开它，不要进行打包。通过这种方式，可以有效地避免库多次引用的问题，减少代码的打包大小。</p> <hr> <p><code>externals</code> 还有另外一种特殊配置，<strong>如下代码所示：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 表明lodash这个库如果在commonjs这种环境下被使用，那么要求lodash加载的时候必须叫做lodash</span>
    <span class="token literal-property property">lodash</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">commonjs</span><span class="token operator">:</span> <span class="token string">'lodash'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>如果这样配置，意在表明 <code>lodash</code> 这个库如果在 <code>commonjs</code> 这种环境下被使用，那么要求 <code>lodash</code> 加载的时候，必须命名为 <code>lodash</code> ，而不能随意命名。<strong>像下面这样：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//✔可使用方式：命名为lodash</span>
<span class="token keyword">import</span> lodash <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
<span class="token comment">//✘不可使用方式：未命名为lodash</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="🚍-二、pwa-的打包配置"><a href="#🚍-二、pwa-的打包配置" class="header-anchor">#</a> 🚍 二、PWA 的打包配置</h1> <h2 id="_1-pwa-是什么"><a href="#_1-pwa-是什么" class="header-anchor">#</a> 1. PWA 是什么</h2> <p><strong>PWA</strong>，全称为 <code>Progressive Web Application</code> ，即渐进式 Web 应用程序。</p> <p><code>PWA</code> 是一门比较新的前端技术，那它是一种什么样的技术呢？</p> <p><code>PWA</code> 可以实现的效果是，如果你访问一个网站，有可能第一次你访问成功了，但是呢，突然间这个网站的服务器挂掉了。那么这个时候你访问网站应该就是没办法访问了。但是呢， <code>PWA</code> 会将你第一次访问的页面给缓存起来。之后即使服务器挂掉了，你依然可以把之前看到的页面再展示出来。</p> <p>因此， <code>webpack</code> 中有一个插件，可以来实现这样的效果。我们来了解一下~</p> <h2 id="_2-webpack-中的-pwa"><a href="#_2-webpack-中的-pwa" class="header-anchor">#</a> 2. webpack 中的 PWA</h2> <p><strong>第一步：</strong> 安装插件。<strong>具体代码如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> workbox-webpack-plugin --save-dev
</code></pre></div><hr> <p><strong>第二步：</strong> 在 <code>webpack.prod.js</code> 中引入该插件并使用。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> WorkboxPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'workbox-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">WorkboxPlugin<span class="token punctuation">.</span>GenerateSW</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">clientsClaim</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">skipWaiting</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>通常情况下，我们只需要在线上环境 <code>prod</code> 引入 <code>PWA</code> ，而在开发环境中不需要考虑这个问题。通过以上的配置，我们在项目打包完成之后， <code>dist</code> 目录下将生成两个新的文件，一个是 <code>service-worker.js</code> ，另外一个是 <code>precache.js</code> 文件，这两个文件就是供我们来使用 PWA 的。</p> <hr> <p><strong>第三步：</strong> 引入以上文件。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'serviceWorker'</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    navigator<span class="token punctuation">.</span>serviceWorker
      <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'/service-worker.js'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">registration</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'service-worker registed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'service-worker regist error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们需要在<strong>入口文件</strong>中，写一段业务代码，引入 <code>service-worker.js</code> 文件，来帮我们做 <code>PWA</code> 。这个时候我们对项目进行打包，之后呢，如果出现服务器突然挂了的情况，那也不用担心， <code>PWA</code> 会帮我们加载原先的页面来提供给我们浏览。</p> <h1 id="🚎-三、typescript-的打包配置"><a href="#🚎-三、typescript-的打包配置" class="header-anchor">#</a> 🚎 三、TypeScript 的打包配置</h1> <h2 id="_1-引例阐述"><a href="#_1-引例阐述" class="header-anchor">#</a> 1. 引例阐述</h2> <p>我们都知道，对于不同的开发者来说，不同的人写出的代码风格形式各异，这样在后期，项目的维护性就很难得到保证。那么，这个时候，风靡于 2018 年的 <code>Typescript</code> 出现了。 <code>ts</code> 规范了一套 <code>js</code> 的标准，因此，我们在项目代码的编写中，通过 <code>ts</code> ，就可以规范我们的代码，并且使得我们项目的维可维护性和可扩展性变得更好了。</p> <p>接下来，我们就来了解一下，如何通过 <code>webpack</code> 的配置变更，来实现对 <code>ts</code> 语法的支持。</p> <h2 id="_2-webpack-对-ts-的配置"><a href="#_2-webpack-对-ts-的配置" class="header-anchor">#</a> 2. webpack 对 ts 的配置</h2> <h3 id="_1-背景"><a href="#_1-背景" class="header-anchor">#</a> （1）背景</h3> <p>假设我们现在有这么一段 <code>ts</code> 的代码需要进行编译，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">greeting</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">message</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>greeting <span class="token operator">=</span> message<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Hello, '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>greeting<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> greeter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token string">'world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Say Hello'</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span><span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>greeter<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在，我们想要让 <code>webpack</code> 来对这段 <code>ts</code> 代码进行编译，该怎么处理呢？</p> <h3 id="_2-配置步骤"><a href="#_2-配置步骤" class="header-anchor">#</a> （2）配置步骤</h3> <p><strong>第一步：</strong> 安装 <code>ts-loader</code> 。<strong>具体命令如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> ts-loader typescript -D
</code></pre></div><p><strong>第二步：</strong> 我们在 <code>webpack.config.js</code> 文件下进行配置。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">'./src/index.tsx'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.tsx?$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>第三步：</strong> 配置 <code>tsconfig.json</code> 文件。<strong>具体代码如下：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-ts-识别第三方库"><a href="#_3-ts-识别第三方库" class="header-anchor">#</a> 3. ts 识别第三方库</h2> <p>有时候，我们会调用 <code>lodash</code> 中的 <code>join</code> 方法，但是呢，如果我们不进行特殊处理的话，在 <code>tsx</code> 文件中正常引入 <code>lodash</code> 这个库并使用，是不会报错的。因此，我们需要来安装另外一个 <code>ts</code> 的库，来对它进行处理一下。<strong>具体步骤如下：</strong></p> <p><strong>第一步：</strong> 安装 <code>@types/lodash</code> 库。<strong>具体命令如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @types/lodash --save-dev
</code></pre></div><p>安装完这个库之后， <code>ts</code> 就可以去识别 <code>lodash</code> 的一些函数和方法，一旦出现引用不对，就会进行报错提示。</p> <p>那有小伙伴就会有疑问说，是不是 <code>ts</code> 拥有所有这样的库（像 <code>jQuery</code> 等各种库）的类型文件呢？</p> <p>答案当然是否定的。我们可以到 <code>github</code> 上的一个网址<a href="https://emojipedia.org/backhand-index-pointing-right/" target="_blank" rel="noopener noreferrer">👉<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><a href="https://microsoft.github.io/TypeSearch/" target="_blank" rel="noopener noreferrer">https://microsoft.github.io/TypeSearch/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来进行搜索，如果搜索得到，那么我们就可以用 <code>@type/库名</code> 来进行安装，之后 <code>tsx</code> 文件就会支持对该库的类型检查。</p> <h1 id="🚕-四、webpackdevserver-进阶操作"><a href="#🚕-四、webpackdevserver-进阶操作" class="header-anchor">#</a> 🚕 四、WebpackDevServer 进阶操作</h1> <h2 id="_1-webpackdevserver-实现请求转发"><a href="#_1-webpackdevserver-实现请求转发" class="header-anchor">#</a> 1. WebpackDevServer 实现请求转发</h2> <p>一般情况下，我们可以通过 <code>charles fiddler</code> 工具，在本地搭建一个代理服务器。通过这台代理服务器，将我们想要请求的接口地址进行转发。</p> <p>那在 <code>webpack</code> 中，给我们提供了一个工具， <code>devServer.Proxy</code> 。接下来，我们在 <code>webpack.config.js</code> 中进行配置，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'/react/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://www.mondaylab.com'</span><span class="token punctuation">,</span>
        <span class="token comment">//实现对https网址的请求转发</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token function-variable function">bypass</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> proxyOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//如果请求的内容是一个html地址，那么就直接返回根路径下index.html的内容</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>accept<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Skipping proxy for browser request'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">'./index.html'</span><span class="token punctuation">;</span>
            <span class="token comment">// return false; //表示如果遇到html请求，那么该给你返回什么就返回什么</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//在前端请求时写header.json，webpack会间接的帮我们拿到demo.json的数据（请求转发】）</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">'header.json'</span><span class="token operator">:</span> <span class="token string">'demo.json'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">//如果有一些网站做了防爬虫，那么我们可能没办法进行跨域。需要进行如下配置，就可以突破对origin的限制</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 在请求头中自定义一些内容</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">'www.mondaylab.com'</span><span class="token punctuation">,</span>
          <span class="token comment">//在做请求转发时模拟一些登录等操作</span>
          <span class="token literal-property property">cookie</span><span class="token operator">:</span> <span class="token string">'gfhgfh'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2-webpackdevserver-解决单页面应用路由问题"><a href="#_2-webpackdevserver-解决单页面应用路由问题" class="header-anchor">#</a> 2. WebpackDevServer 解决单页面应用路由问题</h2> <p>对于现代的的主流框架来说，像 <code>vue.js</code> 、<code>React.js</code> 等等框架，基本都是单页面应用。那么，在单页面应用里，比如我们想要从 <code>http://mondaylab.com</code> 跳转到 <code>http://mondaylab.com/list</code> ，该怎么样进行跳转呢？</p> <p>这就要谈到一个单页面应用的路由问题。我们需要在 <code>webpack.config.js</code> 中进行<strong>如下配置：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//第一种方式</span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">/*等同于
        historyApiFallback: {
            rewrites: [{
                from: /\.*\/,
                to: '/list.html/'
            }]
        }
        */</span>

    <span class="token comment">/*第二种方式
        historyApiFallback: {
            rewrites: [{
                from: /abc.html/,
                //进行转换，当访问abc.html时，会把list.html的内容展示出来
                to: '/list.html/'
            }]
        }
        */</span>

    <span class="token comment">/*第三种方式：更为灵活
        historyApiFallback: {
            rewrites: [{
            	//表明在做页面的替换时，通过一个函数function的形式，结合context的一些参数
            	//做一些js的逻辑放在里面，来决定最终它跳转到哪
                from: /^\/(libs)\/.*$/,
                to: function(context){
                	return '/bower_components' + context.match[0];
                }
            }]
        }
        */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>值得注意的是， <code>historyApiFallback</code> 只能用于开发环境下。如果到了线上环境的话，需要让后端的小伙伴去 <code>nginx</code> 或者 <code>apache</code> 上，仿照 <code>webpackDevServer</code> 的一些配置，在后端的服务器上做同样的配置，配置之后前端才可以使用对应的路由。</p> <h1 id="🚖-五、eslint-在-webpack-中的配置"><a href="#🚖-五、eslint-在-webpack-中的配置" class="header-anchor">#</a> 🚖 五、ESLint 在 Webpack 中的配置</h1> <h2 id="_1-eslint-是什么"><a href="#_1-eslint-是什么" class="header-anchor">#</a> 1. ESLint 是什么</h2> <p>在我们日常的团队开发中，每个人写的代码都各式各样，比如有的人喜欢在代码后边加个分号，有的人又不喜欢加。这间接地，就很容易导致我们项目的可维护性变差了。因此呢，我们就引入了 <code>ESLint</code> 这个内容，来约束的代码规范，让项目的可维护性和可扩展性变高。</p> <p>那 <code>ESLint</code> 在 <code>Webpack</code> 中是怎么样配置的呢？</p> <h2 id="_2-如何安装-eslint"><a href="#_2-如何安装-eslint" class="header-anchor">#</a> 2. 如何安装 ESLint</h2> <p><strong>第一步：</strong> 安装 <code>ESLint</code> 工具。<strong>具体命令如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> eslint --save-dev
</code></pre></div><p><strong>第二步：</strong> 约束我们的代码。我们需要新建一个配置文件，来对我们的 ESLint 规范进行配置。<strong>具体命令如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>npx eslint --init
<span class="token operator">&gt;</span> Use a popular style guide 使用通用的代码检测模板
<span class="token operator">&gt;</span> Airbnb
<span class="token operator">&gt;</span> Do you use React 根据自身需求填y或者n
<span class="token operator">&gt;</span> Javascript
<span class="token operator">&gt;</span> Would you like to <span class="token function">install</span> them now with npm? Y
</code></pre></div><p><strong>第三步：</strong> 使用 <code>eslint</code> 检测代码规范。<strong>具体代码如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>npx eslint src
</code></pre></div><p>以上代码表示的是，使用 eslint 来检测 src 目录下的代码规范。</p> <h2 id="_3-为什么要在-webpack-中配置-eslint"><a href="#_3-为什么要在-webpack-中配置-eslint" class="header-anchor">#</a> 3. 为什么要在 webpack 中配置 ESLint</h2> <p>在上面中我们了解到，每个开发的小伙伴都可以用命令行来检测自己的代码规范，但是如果每回写完一次代码，我们都要去运行这样的命令，才能看我们的代码写的合不合理，这样会不会就有点麻烦了。同时，我们又也不能保证每个人的 <code>eslint</code> 的代码规范设置是不是一样的。</p> <p>因此，我们可以在 <code>webpack</code> 中来进行配置，解决上述所说的问题。<strong>具体步骤如下：</strong></p> <p><strong>第一步：</strong> 安装 <code>eslint-loader</code> 。<strong>具体命令行如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> eslint-loader --save-dev
</code></pre></div><p><strong>第二步：</strong> 配置 <code>webpack.config.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/*当我们运行webpack做打包时，
      一旦代码出现规范问题，
      webpack将会在浏览器上弹出一个报错层来提示我们*/</span>
    <span class="token literal-property property">overlay</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'babel-loader'</span><span class="token punctuation">,</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p>了解完基础配置之后，接下来我们来了解一些 <code>eslint-loader</code> 的一些其他配置。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">//如果代码有一些比较浅显的问题，eslint-loader将会帮助我们自动修复</span>
              <span class="token literal-property property">fix</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token comment">//降低eslint在打包过程中对项目性能的损耗</span>
              <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">//强制eslint-loader先执行</span>
            <span class="token literal-property property">fore</span><span class="token operator">:</span> <span class="token string">'pre'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="🏎️-六、webpack-性能优化"><a href="#🏎️-六、webpack-性能优化" class="header-anchor">#</a> 🏎️ 六、Webpack 性能优化</h1> <p>细心的小伙伴可能已经发现，webpack 的打包速度有时候可能会有一点点慢。这间接地，会浪费我们很多不该浪费的时间。所以，接下来就来谈谈，提升 <code>Webpack</code> 打包速度的几种方法。</p> <h2 id="_1-跟上技术的迭代-node-npm-yarn"><a href="#_1-跟上技术的迭代-node-npm-yarn" class="header-anchor">#</a> 1. 跟上技术的迭代(Node,Npm,Yarn)</h2> <p>如果我们想提升 <code>webpack</code> 的打包速度，我们可以升级 <code>webpack</code> 的版本，或者升级我们的 node、npm 管理器或者 yarn 的版本。</p> <p>那为什么升级这些工具可以提升 <code>webpack</code> 的打包速度呢。</p> <p>大家想一下， <code>webpack</code> 在做每一个版本的更新时，内部肯定会做很多版本的优化，因此，当我们做 <code>webpack</code> 的版本更新时，在速度上肯定会有所提升。 <code>node</code> 、 <code>npm</code> 、 <code>yarn</code> 的更新也是同样的道理。</p> <p>试想一下，如果不提升，那它升级的意义又在哪呢？对吧。</p> <h2 id="_2-在尽可能少的模块上应用-loader"><a href="#_2-在尽可能少的模块上应用-loader" class="header-anchor">#</a> 2. 在尽可能少的模块上应用 Loader</h2> <p>一般情况下，第三方模块的库都是已经进行打包编译过的，所以我们需要在引入 <code>loader</code> 来进行编译时，对 <code>node_module</code> 的文件给忽略掉，或者只在某个文件夹下使用某个 <code>loader</code> ，以此来增加我们的打包速度。我们可以在 <code>webpack.config.js</code> 中进行配置，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">//或者以下这种方式-&gt;include</span>
        <span class="token comment">//include: path.resolve(__dirname, '../src'),</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>当然，依据上面这个思路，还有其他的 <code>loader</code> 也都有其相对应的注意事项，这里不再展开细述。</p> <h2 id="_3-合理使用插件"><a href="#_3-合理使用插件" class="header-anchor">#</a> 3. 合理使用插件</h2> <p>插件要合理的使用，不要使用那些冗余的，没有意义的插件。同时呢，也要选择那些，性能比较好的，官方认可的插件来使用，这样，可以有效的来提升 <code>webpack</code> 的打包速度。</p> <h2 id="_4-resolve-参数合理配置"><a href="#_4-resolve-参数合理配置" class="header-anchor">#</a> 4. resolve 参数合理配置</h2> <h3 id="_1-常见配置"><a href="#_1-常见配置" class="header-anchor">#</a> （1）常见配置</h3> <p>有时候，我们想要对我们引入的文件进行一些<strong>自定义的配置</strong>，该怎么处理呢？<strong>具体配置如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'js'</span><span class="token punctuation">,</span> <span class="token string">'jsx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 1.当你只引入一个目录时，比如 import Child from './child/child' ，
     * 这个时候webpack不知道我们具体是要引入哪个文件，
     * 那么会先去找index文件，如果找不到，那它会继续去找child文件
     */</span>
    <span class="token literal-property property">mainFiles</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token string">'child'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * alias, 顾名思义是别名。
     * 比如，想要将某个文件的引入方式改为自己的名字
     * import Child from './Child' -&gt; import Child from 'monday'
     */</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">monday</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/Child'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>接下来对以上的几个参数进行详细讲解。</p> <h3 id="_2-参数讲解"><a href="#_2-参数讲解" class="header-anchor">#</a> （2）参数讲解</h3> <p><strong>1）extensions</strong></p> <ul><li>比如当引入 <code>import Child from './child/child'</code> 时，会先去找 <code>'./child/child.js'</code> 文件，找不到再去找 <code>'./child/child.jsx'</code> 文件。</li> <li>一般不配置 css 和图片文件，因为 css 和图片可能数量会比较多，相应的会去执行很多次查找。间接地，本来想提升性能，结果又变成了浪费性能了。</li> <li>所以，如果是像 <code>css</code> 和 <code>jpg</code> 等之类的资源文件，应该进行显式的引入；如果是像 <code>js</code> 和 <code>jsx</code> 之类的逻辑文件，可以在 <code>extesions</code> 中配置，进行显式的引入。</li></ul> <p><strong>2）mainFiles</strong></p> <p>当你只引入一个目录时，比如 <code>import Child from './child/child'</code> ，这个时候 <code>webpack</code> 不知道我们具体是要引入哪个文件，那么会先去找 <code>index</code> 文件，如果找不到，那它会继续去找 <code>child</code> 文件。</p> <p><strong>3）alias</strong></p> <ul><li><code>alias</code> , 顾名思义是<strong>别名</strong>。比如，想要将某个文件的引入方式改为自己的名字 <strong>→</strong> <code>import Child from './Child' -&gt; import Child from 'monday'</code> 。</li> <li>常用于多层级目录的情况下。</li></ul> <h2 id="_5-使用-dllplugin-提高打包速度"><a href="#_5-使用-dllplugin-提高打包速度" class="header-anchor">#</a> 5. 使用 DllPlugin 提高打包速度</h2> <p>有时候，我们希望引入的第三方模块，只在第一次做打包的时候进行分析，而后续再做打包时就不要再进行分析了。那该怎么处理呢？</p> <p><strong>第一步：</strong> 新建 <code>webpack.dll.js</code> 文件，并进行配置。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//此处填写我们想要单独进行打包的第三方库名</span>
    <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">,</span> <span class="token string">'lodash'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].dll.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dll'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">/*用library把第三方模块里面的所有代码，
        通过全局变量的方式暴露出去*/</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">'[name]'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">/*暴露完成之后，借助DllPlugin插件对暴露出来的模块代码进行分析，最终生成manifest.json的文件 */</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">//对生成的vendors的库进行DllPlugin的分析(文件映射)</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'[name]'</span><span class="token punctuation">,</span>
      <span class="token comment">// 分析结果所放的路径，分析之后结合全局变量，在common.js中进行配置</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dll/[name].manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>第二步：</strong> 安装 <code>add-asset-html-webpack-plugin</code> 插件。<strong>具体命令如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> add-asset-html-webpack-plugin --save
</code></pre></div><p><strong>第三步：</strong> 配置 <code>webpack.common.js</code> 文件。<strong>具体配置如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> AddAssetHtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'add-asset-html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'src/index.html'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">/**
       * 指的是要往HtmlWebpackPlugin插件生成的index.html中添加一些内容
       */</span>
      <span class="token keyword">new</span> <span class="token class-name">AddAssetHtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">filepath</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dll/vendors.dll.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">/**
       * 1.使用DllReferencePlugin插件，
       * 这个插件会到'../dll/vendors.manifest.json'中找第三方模块的映射关系，
       * 如果能找到映射关系，那么webpack就会知道，这个第三方模块没有必要再打包进来了，
       * 直接从vendors.dll.js中拿过来用就可以了
       * 2.如果发现并不再映射关系里面，那么才会再到node_modules中去找
       *
       */</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">manifest</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../dll/vendors.manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>第四步：</strong> 配置 <code>package.json</code> 文件。<strong>具体代码如下：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build:dll&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./build/webpack.dll.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过运行 <code>npm run build:dll</code> 命令，来实现对第三方库的打包。</p> <h2 id="_6-控制包文件大小"><a href="#_6-控制包文件大小" class="header-anchor">#</a> 6. 控制包文件大小</h2> <p>在我们做项目打包时，我们应该让我们打包生成的文件尽可能的小。有时我们在写代码的时候，经常会在页面里面引入一些没有用的模块，也就是引入一些我们使用的模块。</p> <p>这个时候如果你没有配置 <code>Tree-Shaking</code> ，就会很容易造成打包的时候，出现大量冗余的代码。这些冗余代码呢，间接地，就会拖累我们 <code>webpack</code> 的打包速度。</p> <p>所以呢，我们在做打包时，要控制好文件的大小。<strong>具体步骤参考如下：</strong></p> <ul><li>配置 <code>Tree-shaking</code> ；</li> <li>通过 <code>SplittingChunk</code> 来将一个大的文件分割成多个小的文件。</li></ul> <h2 id="_7-多进程打包"><a href="#_7-多进程打包" class="header-anchor">#</a> 7. 多进程打包</h2> <p><code>webpack</code> 是通过 node 来运行的，所以它的打包过程是单线程的。那有时候呢，我们也可以借助 <code>node</code> 里面的多进程，来帮助我们提升 <code>webpack</code> 的打包速度。</p> <p>常见工具有 <code>thread-loader</code> ， <code>parallel-webpack</code> ， <code>happypack</code> 等工具，大家可以依据自身需求查找相关资料，选出最适合自己项目的工具，进行打包。这一块不再进行详细讲解~</p> <h2 id="_8-合理使用-sourcemap"><a href="#_8-合理使用-sourcemap" class="header-anchor">#</a> 8. 合理使用 sourceMap</h2> <p>通常情况下， <code>sourceMap</code> 越详细，那么打包的速度就会越慢。所以在做打包的时候，要根据当前是开发环境还是生产环境，选出最合适的 <code>sourceMap</code> 配置，来生成我们对应的代码调错文件。</p> <p>这样，一方面能保证我们即使发现代码里的错误问题。另一方面呢，也可以尽可能地提升打包速度。</p> <h2 id="_9-结合-stats-分析打包结果"><a href="#_9-结合-stats-分析打包结果" class="header-anchor">#</a> 9. 结合 stats 分析打包结果</h2> <p>在打包项目时，我们可以通过命令，来生成这次打包情况的 <code>stats</code> 文件，之后呢，通过借助一些线上或者本地的打包分析工具，来达到分析我们本次打包过程中的打包情况。</p> <p>比如说，分析哪个模块打包的时间比较长，哪个模块打包分析的时间比较短等等内容，依据具体的情况进行优化。</p> <h2 id="_10-开发环境内存编译"><a href="#_10-开发环境内存编译" class="header-anchor">#</a> 10. 开发环境内存编译</h2> <p>使用 <code>webpackDevServer</code> 来进行编译，它不会把打包生成的文件放在 <code>dist</code> 目录中去，而是把其放到了我们电脑的内存中。</p> <h2 id="_11-开发环境无用插件剔除"><a href="#_11-开发环境无用插件剔除" class="header-anchor">#</a> 11. 开发环境无用插件剔除</h2> <p>比如说，我们在开发环境的情况下，并不需要对代码进行压缩。因此，对应的压缩插件我们就不要在开发环境中配置，只在生产环境中配置就好了。这样，可以减少一些不必要的打包时间。</p> <h1 id="🏍️-七、多页面打包配置"><a href="#🏍️-七、多页面打包配置" class="header-anchor">#</a> 🏍️ 七、多页面打包配置</h1> <p>通常情况来说，但凡我们在做打包的时候，基本上都是对单页面应用做打包。什么是单页面呢，也就是只有一个 <code>index.html</code> 文件。像目前比较主流的框架， <code>vue</code> 和 <code>react</code> 等框架，都是单页面应用。但是如果像一些比较老的框架，比如 <code>jquery</code> 和 <code>zepto</code> ，可能就需要进行多页面应用打包。</p> <p>因此，顺着这个话题，我们来谈谈，在 <code>webpack</code> 中，如何对多页面应用，进行打包配置。</p> <p>我们在 <code>webpack.common.js</code> 中进行配置，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//引入多个入口文件</span>
    <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token string">'./src/list.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'src/index.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      <span class="token comment">//chunk表明这些html文件要引入的文件有哪些</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'runtime'</span><span class="token punctuation">,</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'src/index.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'list.html'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'runtime'</span><span class="token punctuation">,</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span> <span class="token string">'list'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>通过以上代码我们可以知道，增加 <code>entry</code> 和 <code>plugins</code> 的配置，来增加多个入口页面，从而达到了<strong>多页面应用</strong>配置的效果。</p> <h1 id="🛵-八、结束语"><a href="#🛵-八、结束语" class="header-anchor">#</a> 🛵 八、结束语</h1> <p>通过上文的讲解，相信大家对 <code>webpack</code> 在一些场景中的实战配置有了一定的了解。上面讲述的也是比较浅显的内容，大家可以根据相对应的知识点，进行知识面的拓宽，以便更好的应用到实际的项目当中。</p> <p>到这里，关于 <code>webpack</code> 的实战案例配置就讲解结束啦！希望对大家有帮助~</p> <p>如文章有误或有不理解的地方，欢迎小伙伴们评论区留言哦 💬</p> <p>本文代码已上传至公众号，后台回复关键词 <code>webpack</code> 即可获取~</p> <h1 id="🐣-彩蛋-one-more-thing"><a href="#🐣-彩蛋-one-more-thing" class="header-anchor">#</a> 🐣 彩蛋 One More Thing</h1> <h2 id="往期推荐"><a href="#往期推荐" class="header-anchor">#</a> （：往期推荐</h2> <ul><li>webpack 入门基础知识 👉<a href="https://blog.csdn.net/weixin_44803753/article/details/118728201" target="_blank" rel="noopener noreferrer">不会 webpack 的前端可能是捡来的，万字总结 webpack 的超入门核心知识<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>webpack 入门进阶知识 👉<a href="https://blog.csdn.net/weixin_44803753/article/details/118885391" target="_blank" rel="noopener noreferrer">webpack 入门核心知识还看不过瘾？速来围观进阶知识<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="番外篇"><a href="#番外篇" class="header-anchor">#</a> （：番外篇</h2> <blockquote><ul><li>关注公众号<strong>星期一研究室</strong>，第一时间关注优质文章，<strong>更多精选专栏待你解锁</strong>~</li> <li>如果这篇文章对你有用，记得<strong>留个脚印 jio</strong>再走哦~</li> <li>以上就是本文的全部内容！我们下期见！👋👋👋</li></ul></blockquote></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/14/2022, 4:10:56 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/mondaylab-blog/column/FrontEnd/Webpack/002.html" class="prev">
            002-webpack入门进阶知识
          </a></span> <span class="next"><a href="/mondaylab-blog/column/FrontEnd/Webpack/004.html">
            004-webpack实战案例配置
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🛴-序言" class="sidebar-link reco-side-🛴-序言" data-v-cb1513f6>🛴 序言</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🚌-一、library-的打包" class="sidebar-link reco-side-🚌-一、library-的打包" data-v-cb1513f6>🚌 一、Library 的打包</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_1-webpack-打包库" class="sidebar-link reco-side-_1-webpack-打包库" data-v-cb1513f6>1. webpack 打包库</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_2-库引用冲突" class="sidebar-link reco-side-_2-库引用冲突" data-v-cb1513f6>2. 库引用冲突</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🚍-二、pwa-的打包配置" class="sidebar-link reco-side-🚍-二、pwa-的打包配置" data-v-cb1513f6>🚍 二、PWA 的打包配置</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_1-pwa-是什么" class="sidebar-link reco-side-_1-pwa-是什么" data-v-cb1513f6>1. PWA 是什么</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_2-webpack-中的-pwa" class="sidebar-link reco-side-_2-webpack-中的-pwa" data-v-cb1513f6>2. webpack 中的 PWA</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🚎-三、typescript-的打包配置" class="sidebar-link reco-side-🚎-三、typescript-的打包配置" data-v-cb1513f6>🚎 三、TypeScript 的打包配置</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_1-引例阐述" class="sidebar-link reco-side-_1-引例阐述" data-v-cb1513f6>1. 引例阐述</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_2-webpack-对-ts-的配置" class="sidebar-link reco-side-_2-webpack-对-ts-的配置" data-v-cb1513f6>2. webpack 对 ts 的配置</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_1-背景" class="sidebar-link reco-side-_1-背景" data-v-cb1513f6>（1）背景</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_2-配置步骤" class="sidebar-link reco-side-_2-配置步骤" data-v-cb1513f6>（2）配置步骤</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_3-ts-识别第三方库" class="sidebar-link reco-side-_3-ts-识别第三方库" data-v-cb1513f6>3. ts 识别第三方库</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🚕-四、webpackdevserver-进阶操作" class="sidebar-link reco-side-🚕-四、webpackdevserver-进阶操作" data-v-cb1513f6>🚕 四、WebpackDevServer 进阶操作</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_1-webpackdevserver-实现请求转发" class="sidebar-link reco-side-_1-webpackdevserver-实现请求转发" data-v-cb1513f6>1. WebpackDevServer 实现请求转发</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_2-webpackdevserver-解决单页面应用路由问题" class="sidebar-link reco-side-_2-webpackdevserver-解决单页面应用路由问题" data-v-cb1513f6>2. WebpackDevServer 解决单页面应用路由问题</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🚖-五、eslint-在-webpack-中的配置" class="sidebar-link reco-side-🚖-五、eslint-在-webpack-中的配置" data-v-cb1513f6>🚖 五、ESLint 在 Webpack 中的配置</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_1-eslint-是什么" class="sidebar-link reco-side-_1-eslint-是什么" data-v-cb1513f6>1. ESLint 是什么</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_2-如何安装-eslint" class="sidebar-link reco-side-_2-如何安装-eslint" data-v-cb1513f6>2. 如何安装 ESLint</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_3-为什么要在-webpack-中配置-eslint" class="sidebar-link reco-side-_3-为什么要在-webpack-中配置-eslint" data-v-cb1513f6>3. 为什么要在 webpack 中配置 ESLint</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🏎️-六、webpack-性能优化" class="sidebar-link reco-side-🏎️-六、webpack-性能优化" data-v-cb1513f6>🏎️ 六、Webpack 性能优化</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_1-跟上技术的迭代-node-npm-yarn" class="sidebar-link reco-side-_1-跟上技术的迭代-node-npm-yarn" data-v-cb1513f6>1. 跟上技术的迭代(Node,Npm,Yarn)</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_2-在尽可能少的模块上应用-loader" class="sidebar-link reco-side-_2-在尽可能少的模块上应用-loader" data-v-cb1513f6>2. 在尽可能少的模块上应用 Loader</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_3-合理使用插件" class="sidebar-link reco-side-_3-合理使用插件" data-v-cb1513f6>3. 合理使用插件</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_4-resolve-参数合理配置" class="sidebar-link reco-side-_4-resolve-参数合理配置" data-v-cb1513f6>4. resolve 参数合理配置</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_1-常见配置" class="sidebar-link reco-side-_1-常见配置" data-v-cb1513f6>（1）常见配置</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_2-参数讲解" class="sidebar-link reco-side-_2-参数讲解" data-v-cb1513f6>（2）参数讲解</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_5-使用-dllplugin-提高打包速度" class="sidebar-link reco-side-_5-使用-dllplugin-提高打包速度" data-v-cb1513f6>5. 使用 DllPlugin 提高打包速度</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_6-控制包文件大小" class="sidebar-link reco-side-_6-控制包文件大小" data-v-cb1513f6>6. 控制包文件大小</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_7-多进程打包" class="sidebar-link reco-side-_7-多进程打包" data-v-cb1513f6>7. 多进程打包</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_8-合理使用-sourcemap" class="sidebar-link reco-side-_8-合理使用-sourcemap" data-v-cb1513f6>8. 合理使用 sourceMap</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_9-结合-stats-分析打包结果" class="sidebar-link reco-side-_9-结合-stats-分析打包结果" data-v-cb1513f6>9. 结合 stats 分析打包结果</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_10-开发环境内存编译" class="sidebar-link reco-side-_10-开发环境内存编译" data-v-cb1513f6>10. 开发环境内存编译</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#_11-开发环境无用插件剔除" class="sidebar-link reco-side-_11-开发环境无用插件剔除" data-v-cb1513f6>11. 开发环境无用插件剔除</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🏍️-七、多页面打包配置" class="sidebar-link reco-side-🏍️-七、多页面打包配置" data-v-cb1513f6>🏍️ 七、多页面打包配置</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🛵-八、结束语" class="sidebar-link reco-side-🛵-八、结束语" data-v-cb1513f6>🛵 八、结束语</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#🐣-彩蛋-one-more-thing" class="sidebar-link reco-side-🐣-彩蛋-one-more-thing" data-v-cb1513f6>🐣 彩蛋 One More Thing</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#往期推荐" class="sidebar-link reco-side-往期推荐" data-v-cb1513f6>（：往期推荐</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/Webpack/003.html#番外篇" class="sidebar-link reco-side-番外篇" data-v-cb1513f6>（：番外篇</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/mondaylab-blog/assets/js/app.c88a0deb.js" defer></script><script src="/mondaylab-blog/assets/js/3.88ba4622.js" defer></script><script src="/mondaylab-blog/assets/js/1.4561d677.js" defer></script><script src="/mondaylab-blog/assets/js/65.05ea22b8.js" defer></script>
  </body>
</html>
