<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redux从入门到进阶，看这一篇就够了！ | 星期一研究室mondaylab</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="分享前沿学习干货，不止前端">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/mondaylab-blog/assets/css/0.styles.4ac1ff55.css" as="style"><link rel="preload" href="/mondaylab-blog/assets/js/app.7012c839.js" as="script"><link rel="preload" href="/mondaylab-blog/assets/js/3.88ba4622.js" as="script"><link rel="preload" href="/mondaylab-blog/assets/js/1.4561d677.js" as="script"><link rel="preload" href="/mondaylab-blog/assets/js/46.fcc888d9.js" as="script"><link rel="prefetch" href="/mondaylab-blog/assets/js/10.034a7746.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/100.9ebd6546.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/101.ac7d2796.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/102.da77add9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/103.32bc35c2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/104.6e7ea2bd.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/105.354ffeca.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/106.f96e9c97.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/107.5d4340a1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/108.2542f55b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/109.5f279896.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/11.222777c7.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/110.c397e2e2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/111.ace82322.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/112.d2cfbad6.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/113.d872119b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/114.f1c0cddd.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/115.1400dbcf.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/116.dcb131ff.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/117.181a807d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/118.a6d0c7be.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/119.d71b6d38.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/12.1e3290cc.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/120.6eacd5bb.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/121.22ab2b7c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/122.aaef3a6c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/123.51ec7c1b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/124.dc452810.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/125.47c1aac6.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/126.1efcd0dd.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/127.5a899da7.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/128.aeb60685.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/129.cba9727f.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/13.2a9829ba.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/130.1a926e98.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/131.b96ad90e.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/132.ea80c278.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/133.444ff23a.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/134.cdc38ea8.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/135.03b5e35d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/136.111ca983.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/137.637569aa.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/138.dc0dc04f.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/139.7541018f.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/14.31ea28b7.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/15.077d80e8.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/16.5df903e5.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/17.e76fba5e.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/18.18a25886.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/19.e0e29be9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/20.e198838b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/21.c1febef9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/22.8b4c7a06.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/23.83c451b0.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/24.41ee9309.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/25.c915e9e8.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/26.adc5df84.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/27.1733c84c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/28.64d9e5e1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/29.37d68b52.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/30.e1a43b09.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/31.a3ee8c6b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/32.9cd71a23.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/33.69bc3aec.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/34.19d1bb45.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/35.2983c4b0.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/36.50262101.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/37.c97e8d25.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/38.e1b1c238.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/39.8ceb07a3.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/4.5fce2cb1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/40.a8a88bb4.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/41.86275d20.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/42.bce83ddd.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/43.5d31d65f.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/44.9e1595eb.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/45.23e9054d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/47.ded2c0d8.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/48.686e1944.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/49.5ead93d1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/5.41f6904b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/50.a8ab1e19.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/51.32eaf615.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/52.a8bc5574.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/53.6150f1a8.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/54.5805fae7.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/55.7379e12b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/56.fb541ce6.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/57.f67b748b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/58.5959c74d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/59.fa5bf342.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/6.3b3e9e8b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/60.6d86bab1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/61.be086da9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/62.a535083f.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/63.636b8f33.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/64.f72f6dc9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/65.718d881d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/66.a973e0ff.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/67.97b20c5c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/68.6130228e.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/69.4a7ef92e.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/7.01286607.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/70.820fdaa9.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/71.4e1a330c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/72.c910489c.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/73.a1aff9ec.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/74.76994fcb.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/75.d9565e94.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/76.b09b91c4.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/77.400e1f1d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/78.d6422256.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/79.c169cd65.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/8.b3bf0af5.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/80.27ed8eb4.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/81.3bdf1a92.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/82.b58e3831.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/83.7a9cc1d0.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/84.34a9e70b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/85.1e995337.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/86.a351b5a1.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/87.ce8b12bf.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/88.28da5421.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/89.7e768a36.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/9.27bc3278.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/90.0895b0d8.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/91.8e378d73.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/92.7c53ecc2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/93.90d47fa2.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/94.978c1d5b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/95.a8c6646d.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/96.967e692b.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/97.045745a7.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/98.4d5772b4.js"><link rel="prefetch" href="/mondaylab-blog/assets/js/99.3b801e11.js">
    <link rel="stylesheet" href="/mondaylab-blog/assets/css/0.styles.4ac1ff55.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>星期一研究室mondaylab</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>分享前沿学习干货，不止前端</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>SyllableCheng</span>
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mondaylab-blog/" class="home-link router-link-active"><img src="/mondaylab-blog/avatar.png" alt="星期一研究室mondaylab" class="logo"> <span class="site-name">星期一研究室mondaylab</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mondaylab-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-tag"></i>
      精选专栏
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Algorithm/" class="nav-link"><i class="undefined"></i>
  数构与前端
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Interview/" class="nav-link"><i class="undefined"></i>
  offer来了
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-eye"></i>
      干货社区
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Learning/" class="nav-link"><i class="undefined"></i>
  快捷键
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Learning/" class="nav-link"><i class="undefined"></i>
  Notion模板
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类索引
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Product/" class="nav-link"><i class="undefined"></i>
  产品汪
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/FrontEnd/" class="nav-link router-link-active"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/OtherLang/" class="nav-link"><i class="undefined"></i>
  其他语言
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/BackEnd/" class="nav-link"><i class="undefined"></i>
  服务端开发
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/ComputerKnowledge/" class="nav-link"><i class="undefined"></i>
  计算机基础知识
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Growing/" class="nav-link"><i class="undefined"></i>
  碎碎念个人成长
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Jacqueline712" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3131845139247960/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_44803753" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.infoq.cn/profile/3AC1A95FEC468A/publish" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  InfoQ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/zheng-zi-ji-67-89/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/mondaylab-blog/avatar.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    SyllableCheng
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>128</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>25</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/mondaylab-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-tag"></i>
      精选专栏
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Algorithm/" class="nav-link"><i class="undefined"></i>
  数构与前端
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Interview/" class="nav-link"><i class="undefined"></i>
  offer来了
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-eye"></i>
      干货社区
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Learning/" class="nav-link"><i class="undefined"></i>
  快捷键
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Learning/" class="nav-link"><i class="undefined"></i>
  Notion模板
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类索引
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Product/" class="nav-link"><i class="undefined"></i>
  产品汪
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/FrontEnd/" class="nav-link router-link-active"><i class="undefined"></i>
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/OtherLang/" class="nav-link"><i class="undefined"></i>
  其他语言
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/BackEnd/" class="nav-link"><i class="undefined"></i>
  服务端开发
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/ComputerKnowledge/" class="nav-link"><i class="undefined"></i>
  计算机基础知识
</a></li><li class="dropdown-item"><!----> <a href="/mondaylab-blog/column/Growing/" class="nav-link"><i class="undefined"></i>
  碎碎念个人成长
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Jacqueline712" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3131845139247960/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/weixin_44803753" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.infoq.cn/profile/3AC1A95FEC468A/publish" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  InfoQ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/zheng-zi-ji-67-89/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>react.js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mondaylab-blog/column/FrontEnd/React/001.html" class="sidebar-link">001-初探react</a></li><li><a href="/mondaylab-blog/column/FrontEnd/React/002.html" class="sidebar-link">002-react进阶知识</a></li><li><a href="/mondaylab-blog/column/FrontEnd/React/003.html" aria-current="page" class="active sidebar-link">003-Redux从入门到进阶</a></li><li><a href="/mondaylab-blog/column/FrontEnd/React/004.html" class="sidebar-link">004-react的基本使用和高级特性</a></li><li><a href="/mondaylab-blog/column/FrontEnd/React/005.html" class="sidebar-link">005-React hooks</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue.js原理解析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3+ts组件库开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>实战类</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>青训营YouthCamp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>掘金翻译计划</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>Redux从入门到进阶，看这一篇就够了！</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>SyllableCheng</span>
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">Redux从入门到进阶，看这一篇就够了！</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>周一</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>10/26/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>React.js</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="🌂-序言"><a href="#🌂-序言" class="header-anchor">#</a> 🌂 序言</h1> <p>大家都知道， <code>react</code> 是<strong>单向数据流</strong>，所以它传递数据也较为简单，父子之间的关系也较为明确。但是呢，如果我们要做更多复杂数据的传递，单单使用 <code>react</code> 是完全不够的。因此，我们需要用到 <code>redux</code> 来做更为复杂的数据传递。</p> <p>那在下面的这篇文章中，将从入门到进阶，讲解 <code>redux</code> 的工作流程。</p> <p>叮！开始 <code>redux</code> 之旅吧~👏</p> <h1 id="☂️-一、基础知识"><a href="#☂️-一、基础知识" class="header-anchor">#</a> ☂️ 一、基础知识</h1> <h2 id="_1、redux-概念简述"><a href="#_1、redux-概念简述" class="header-anchor">#</a> 1、Redux 概念简述</h2> <p>对于 <code>react</code> 来说，它是一个非视图层的轻量级框架，如果要用它来传递数据的话，则要先父传子，然后再慢慢地一层一层往上传递。</p> <p>但如果用 <code>redux</code> 的话，假设我们想要<strong>某个组件的数据</strong>，那这个组件的数据则会通过 <code>redux</code> 来存放到 <code>store</code> 中进行管理。之后呢，通过 <code>store</code> ，再来将数据一步步地往下面的组件进行传递。</p> <p>值得注意的是，我们可以视 <code>Redux</code> 为 <code>Reducer</code> 和 <code>Flux</code> 的结合。</p> <h2 id="_2、redux-的工作流程"><a href="#_2、redux-的工作流程" class="header-anchor">#</a> 2、Redux 的工作流程</h2> <p><code>Redux</code> ，实际上就是一个<strong>数据层</strong>的框架，它把所有的数据都放在了 <code>store</code> 之中。<strong>我们先来看一张图：</strong></p> <p><img src="https://img-blog.csdnimg.cn/b849ae1d8909406ebd924002eccd6039.png#pic_center" alt="Redux的工作流程"></p> <p>大家可以看到中间的 <code>store</code> ，它里面就存放着<strong>所有的数据</strong>。继续看 <code>store</code> 向下的箭头，然后呢，每个组件都要向 <code>store</code> 里面去拿数据。</p> <p>我们用一个例子来梳理整张图，<strong>具体如下：</strong></p> <ul><li>① 整张图上有一个 <code>store</code> ，它存放着所有的数据，也就是<strong>存储数据的公共区域</strong>；</li> <li>② 每个组件，都要从 <code>store</code> 里面拿数据；</li> <li>③ 假设现在有一个场景，模拟我们要在图书馆里面借书。那么我们可以把 <code>react Component</code> 理解为借书人，之后呢，借书人要去找图书馆管理员才能借到这本书。而借书这个过程中数据的传递，就可以把它视为是 <code>Action Creators</code> ，可以理解为 <strong>“你想要借什么书”</strong> 这句话。</li> <li>④ <code>Action Creatures</code> 去到 <code>store</code> 。这个时候我们把 <code>store</code> 当做是<strong>图书馆管理员</strong>，但是，图书馆管理员是没有办法记住所有图书的数据情况的。一般来说，它都需要一个记录本，你想要借什么样的书，那么她就先查一下；又或者你想要还什么书，她也要查一下，需要放回什么位置上。</li> <li>⑤ 这个时候就需要跟 <code>reducers</code> 去通信，我们可以把 <code>reducers</code> 视为是一个<strong>记录本</strong>，图书馆管理员用这个<strong>记录本</strong>来记录需要的数据。管理员 <code>store</code> 通过 <code>reducer</code> 知道了应该给借书人 <code>Components</code> 什么样的数据。</li></ul> <h1 id="🎃-二、使用-antd-实现-todolist-页面布局"><a href="#🎃-二、使用-antd-实现-todolist-页面布局" class="header-anchor">#</a> 🎃 二、使用 Antd 实现 TodoList 页面布局</h1> <h2 id="_1、在项目中使用-antd"><a href="#_1、在项目中使用-antd" class="header-anchor">#</a> 1、在项目中使用 Antd</h2> <p>打开 <code>antdesign</code> 的官网 👉<a href="https://ant.design/index-cn" target="_blank" rel="noopener noreferrer">antd 官网传送门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，我们先来在项目中引入它。<strong>具体步骤如下：</strong></p> <p>第一步，安装 <code>antd</code> 。<strong>命令如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> antd --save
</code></pre></div><p>第二步，引入样式。<strong>代码如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span> // or <span class="token string">'antd/dist/antd.less'</span>
</code></pre></div><h2 id="_2、使用-antd-实现-todolist-的基本布局"><a href="#_2、使用-antd-实现-todolist-的基本布局" class="header-anchor">#</a> 2、使用 Antd 实现 TodoList 的基本布局</h2> <p>首先，我们在项目的 <code>src</code> 文件夹下创建一个新的文件，命名为 <code>TodoList.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'Racing car sprays burning fuel into crowd.'</span><span class="token punctuation">,</span>
  <span class="token string">'Japanese princess to wed commoner.'</span><span class="token punctuation">,</span>
  <span class="token string">'Australian walks 100km after outback crash.'</span><span class="token punctuation">,</span>
  <span class="token string">'Man charged over missing wedding girl.'</span><span class="token punctuation">,</span>
  <span class="token string">'Los Angeles battles huge wildfires.'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> <span class="token literal-property property">marginLeft</span><span class="token operator">:</span> <span class="token string">'10px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Input placeholder<span class="token operator">=</span><span class="token string">'todo info'</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'300px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">'primary'</span><span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>List
          bordered
          dataSource<span class="token operator">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span>
          renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><p><strong>此时浏览器的显示效果为：</strong></p> <p><img src="https://img-blog.csdnimg.cn/ef28eeff3bc040fe8162739dc5dbfaf5.png#pic_center" alt="antd布局todoList"></p> <h2 id="_3、创建-redux-中的-store"><a href="#_3、创建-redux-中的-store" class="header-anchor">#</a> 3、创建 redux 中的 store</h2> <h3 id="_1-创建-store"><a href="#_1-创建-store" class="header-anchor">#</a> （1）创建 store</h3> <p>接下来我们来创建项目中的 <code>store</code> 。首先在项目的 <code>src</code> 文件夹下创建一个新的文件夹，命名为 <code>store</code> 。接着，我们在 <code>store</code> 文件夹下面，创建一个新的文件，命名为 <code>index.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><p>然后呢，继续在 <code>store</code> 文件夹下面创建一个新的文件，命名为 <code>reducer.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> defaultStore <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultStore<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>由此，我们就创建完成了项目中的 <code>store</code> 。</p> <h3 id="_2-在项目中使用-store"><a href="#_2-在项目中使用-store" class="header-anchor">#</a> （2）在项目中使用 store</h3> <p>创建完 <code>store</code> 之后，我们先初步在项目中使用这个 <code>store</code> ，以便于看看效果。先来添加 <code>store</code> 中的数据，首先改造在 <code>store</code> 中的 <code>reducer.js</code> 文件，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> defaultStore <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultStore<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>之后改造 <code>TodoList.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> <span class="token literal-property property">marginLeft</span><span class="token operator">:</span> <span class="token string">'10px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Input
            placeholder<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span>
            style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'300px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">'primary'</span><span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>List
          bordered
          dataSource<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span>
          renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><p><strong>此时浏览器的显示效果为：</strong></p> <p><img src="https://img-blog.csdnimg.cn/37e3e399dec44e0ea4b9c1f3e34e8a10.png#pic_center" alt="todoList接收来自store的数据"></p> <h1 id="🧵-三、action-和-reducer-的编写-增添功能"><a href="#🧵-三、action-和-reducer-的编写-增添功能" class="header-anchor">#</a> 🧵 三、Action 和 Reducer 的编写 - 增添功能</h1> <h2 id="_1、主体页面内容改造"><a href="#_1、主体页面内容改造" class="header-anchor">#</a> 1、主体页面内容改造</h2> <p>接下来，我们使用 <code>action</code> 和 <code>reducer</code> ，来对这个组件的数据进行前后传递。首先，先来改造 <code>TodoList.js</code> 文件。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleInputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleStoreChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleStoreChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleBtnClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleStoreChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> <span class="token literal-property property">marginLeft</span><span class="token operator">:</span> <span class="token string">'10px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Input
            value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span>
            placeholder<span class="token operator">=</span><span class="token string">'todo info'</span>
            style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> <span class="token literal-property property">marginRight</span><span class="token operator">:</span> <span class="token string">'10px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">'primary'</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            提交
          <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>List
          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'300px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
          bordered
          dataSource<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span>
          renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在react中，action是一个对象的形式</span>
    <span class="token comment">// type旨在告诉react说，你帮我去改变input的值，这个值是下面的value，也就是e.target.value</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'change_input_value'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(e.target.value)</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleStoreChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当感知到store的数据发生变化时，那么就去调用store.getState方法，从store里面再重新取一次数据，</span>
    <span class="token comment">// 然后去调用setState，替换掉当前store里面的数据</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'add_todo_item'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><p>接下来我们来分析以上代码。首先，每一个动作分别会先去绑定对应的事件，之后呢，在事件里面，去创造 <code>action</code> 。而对于创造的 <code>action</code> 来说，它旨在告诉 <code>react</code> ，让 <code>react</code> 去帮忙 <code>action</code> 去改变某个值，而这个值就是它绑定的 <code>value</code> 。</p> <p>最后， <code>action</code> 要做的事情结束了，那么它的数据就需要去存储到 <code>store</code> 里面。于是通过 <code>store.dispatch(action)</code> 来进行处理，将 <code>action</code> 的数据传递到 <code>store</code> 里面。</p> <h2 id="_2、改变-action-中的数据"><a href="#_2、改变-action-中的数据" class="header-anchor">#</a> 2、改变 action 中的数据</h2> <p>对于 <code>action</code> 一开始的值来说，它是固定的。但有时候我们是想要去修改 action 中的值，这个时候就需要用到 <code>reducer</code> 。现在，我们来改造下 <code>reducer.js</code> 文件，让 <code>input</code> 框可以自由的输入值，同时，点击<strong>提交按钮</strong>之后，进行列表的增添操作。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> defaultStore <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// reducer 可以接收state，但是绝不能修改state</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultStore<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'change_input_value'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'add_todo_item'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newState<span class="token punctuation">.</span>inputValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> reducer<span class="token punctuation">;</span>
</code></pre></div><h2 id="_3、store-数据改造"><a href="#_3、store-数据改造" class="header-anchor">#</a> 3、store 数据改造</h2> <p>下面，我们来看下 <code>store</code> 文件夹下 <code>index.js</code> 的内容。我们需要对其进行简单的改造，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
  reducer<span class="token punctuation">,</span>
  window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION__ <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION__</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><p>除了 <code>reducer</code> 之外，我们还要将 <code>window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</code> 给传递进去并调用这个方法。</p> <p>最后，我们来看下<strong>浏览器的显示效果：</strong></p> <p><img src="https://img-blog.csdnimg.cn/52a01342aa144968bf98ac541152d487.gif#pic_center" alt="action和reducer传递数据"></p> <h1 id="🧶-四、使用-redux-实现-todolist-的删除功能"><a href="#🧶-四、使用-redux-实现-todolist-的删除功能" class="header-anchor">#</a> 🧶 四、使用 Redux 实现 TodoList 的删除功能</h1> <h2 id="_1、对组件进行事件绑定"><a href="#_1、对组件进行事件绑定" class="header-anchor">#</a> 1、对组件进行事件绑定</h2> <p>上面我们实现了增添功能，那么现在，我们继续来实现<strong>删除功能</strong>，实现<strong>每点击每一项时</strong>，能够删除<strong>点击项</strong>的数据。先来在 <code>TodoList.js</code> 文件中绑定对应的事件，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 此处省略上述已有代码</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token punctuation">{</span><span class="token comment">/* 此处省略上述已有代码 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>List
          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'300px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
          bordered
          dataSource<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span>
          renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleItemDelete</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 此处省略上述已有代码</span>

  <span class="token function">handleItemDelete</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'delete_todo_item'</span><span class="token punctuation">,</span>
      index
    <span class="token punctuation">}</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><h2 id="_2、在-reducer-中进行数据通信"><a href="#_2、在-reducer-中进行数据通信" class="header-anchor">#</a> 2、在 reducer 中进行数据通信</h2> <p>接着，我们在 <code>reducer.js</code> 文件中，对数据进行通信。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> defaultStore <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// reducer 可以接收state，但是绝不能修改state</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultStore<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 此处省略上述已有代码</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'delete_todo_item'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> reducer<span class="token punctuation">;</span>
</code></pre></div><p>现在，我们来看下<strong>浏览器的显示效果：</strong></p> <p><img src="https://img-blog.csdnimg.cn/7beca650958846f88a4bd069a18f5d06.gif#pic_center" alt="删除功能"></p> <h1 id="👓-五、逻辑归纳"><a href="#👓-五、逻辑归纳" class="header-anchor">#</a> 👓 五、逻辑归纳</h1> <h2 id="_1、actiontypes-的拆分"><a href="#_1、actiontypes-的拆分" class="header-anchor">#</a> 1、ActionTypes 的拆分</h2> <p>在上面的 <code>TodoList.js</code> 中，大家可以看到，我们会频繁地去操作 <code>action</code> 。同时，假设说其中的 <code>type</code> 如果我们稍微写错了一个字母，那排错的过程总是不好定位的。</p> <p>因此，我们要来做的一件事情就是 <code>ActionTypes</code> 的拆分。</p> <p>首先，我们在 <code>store</code> 文件夹下新增一个文件，命名为 <code>actionTypes.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CHANGE_INPUT_VALUE</span> <span class="token operator">=</span> <span class="token string">'change_input_value'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ADD_TODO_ITEM</span> <span class="token operator">=</span> <span class="token string">'add_todo_item'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DELETE_TODO_ITEM</span> <span class="token operator">=</span> <span class="token string">'delete_todo_item'</span><span class="token punctuation">;</span>
</code></pre></div><p>其次，改造 <code>TodoList.js</code> 下的内容。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
  <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store/actionTypes'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleStoreChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleItemDelete</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
      index<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><p>最后，改造 <code>reducer.js</code> 文件。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
  <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultStore <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultStore<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newState<span class="token punctuation">.</span>inputValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> reducer<span class="token punctuation">;</span>
</code></pre></div><p>通过将 <code>change_input_value</code> 、 <code>add_todo_item</code> 和 <code>delete_todo_item</code> 进行整合，将其整合到 <code>actionTypes.js</code> 文件下，这样，如果我们遇到字母写错的情况下，也能够更好的进行排错。</p> <h2 id="_2、使用-actioncreator-统一创建-action"><a href="#_2、使用-actioncreator-统一创建-action" class="header-anchor">#</a> 2、使用 actionCreator 统一创建 action</h2> <p>在上面的 <code>TodoList.js</code> 中，大家可以看到，对于几个绑定的事件来说，我们总是要<strong>频繁的去创建 <code>action</code></strong> ，重复性地操作是在程序中最忌讳的一个事情。因此呢，我们要使用 <code>actionCreator</code> ，来对 <code>action</code> 进行统一管理，使得逻辑更加地统一完整。</p> <p>首先，我们在 <code>store</code> 文件夹下新创建一个文件，命名为 <code>actionCreators.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
  <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getInputChangeAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> value<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getAddItemAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getDeleteItemAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token literal-property property">index</span><span class="token operator">:</span> index<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>继续，我们来改造 <code>TodoList.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  getInputChangeAction<span class="token punctuation">,</span>
  getAddItemAction<span class="token punctuation">,</span>
  getDeleteItemAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store/actionCreators'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getInputChangeAction</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getAddItemAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleItemDelete</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getDeleteItemAction</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><p>通过将 <code>action</code> 中的操作统一抽离到 <code>actionCreators.js</code> 当中，使得最终的逻辑更加的统一。</p> <h1 id="👔-六、redux-的一些总结"><a href="#👔-六、redux-的一些总结" class="header-anchor">#</a> 👔 六、Redux 的一些总结</h1> <p>讲到这里，我们对上面的一些知识点进行归纳总结，具体如下</p> <h2 id="_1、redux-设计和使用的三项原则"><a href="#_1、redux-设计和使用的三项原则" class="header-anchor">#</a> 1、Redux 设计和使用的三项原则</h2> <p><code>Redux</code> 的设计和使用<strong>遵循以下三大原则：</strong></p> <ul><li><code>store</code> 必须是唯一的 👉 即整个应用之中必须且只能有一个 <code>store</code> ；</li> <li>只有 <code>store</code> 能够改变自己的内容 👉 即 <code>store</code> 不是 <code>reducer</code> 去更新的，而是 <code>store</code> 在拿到 <code>reducer</code> 的数据之后，自己对自己的数据进行一次更新；因此，我们回到上面的 <code>reducer.js</code> 文件，在 <code>react</code> 中，是不允许 <code>state.inputValue === 某个值</code> 之类的事情发生的哦，也就是说不能对其直接进行赋值。</li> <li><code>Reducer</code> 必须是纯函数 👉 所谓<strong>纯函数</strong>，即给定固定的输入，就一定有固定的输出，而且不会产生任何的副作用。回到我们上面的 <code>reducer.js</code> 文件，大家可以看到， <code>state</code> 是固定的， <code>action</code> 也是固定的，那么最终返回的 <code>newState</code> 自然也就是固定的。</li></ul> <h2 id="_2、redux-的核心-api"><a href="#_2、redux-的核心-api" class="header-anchor">#</a> 2、Redux 的核心 API</h2> <p>我们再来复习 <code>Redux</code> 的几个核心 <code>API</code> 。<strong>先看下图：</strong></p> <p><img src="https://img-blog.csdnimg.cn/eeb0ced5908c49cda5d5d2e1430b6926.png#pic_center" alt="Redux的核心API"></p> <p>现在来回顾下这几个核心 <code>API</code> 的作用。<strong>具体如下：</strong></p> <ul><li>createStore —— 可以帮助我们创建一个 <code>store</code> ；</li> <li>store.dispatch —— <code>dispatch</code> 方法帮助我们派发 <code>action</code> ，同时，这个 <code>action</code> 会传递给 <code>store</code> ；</li> <li>store.getState —— <code>getState</code> 方法帮助我们获取到所有的数据；</li> <li>store.subscribe —— <code>subscribe</code> 帮助我们订阅 <code>store</code> 的改变，只要 <code>store</code> 发生改变，<code>store.subscribe</code> 接收的回调函数就会被执行。</li></ul> <h1 id="👝-七、进阶组件的拆分"><a href="#👝-七、进阶组件的拆分" class="header-anchor">#</a> 👝 七、进阶组件的拆分</h1> <h2 id="_1、ui-组件和容器组件的拆分"><a href="#_1、ui-组件和容器组件的拆分" class="header-anchor">#</a> 1、UI 组件和容器组件的拆分</h2> <p>在上面的代码中，我们已经基本完成了 <code>TodoList</code> 的功能。但是呢，大家有没有发现，在 <code>TodoList.js</code> 文件中，页面的渲染和页面的逻辑编写是放在一起的。</p> <p>往往在实际开发中，我们都会直接把 <strong><code>UI</code> 组件</strong>和<strong>容器组件</strong>给拆分开来。其中， <code>UI</code> 组件专门用于负责<strong>页面的渲染</strong>，而容器组件用于负责<strong>页面的逻辑</strong>。</p> <p>下面我们来对其进行拆分。首先，我们现在 <code>src</code> 文件夹下新增一个文件，命名为 <code>TodoListUI.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoListUI</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> <span class="token literal-property property">marginLeft</span><span class="token operator">:</span> <span class="token string">'10px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Input
            value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span>
            placeholder<span class="token operator">=</span><span class="token string">'todo info'</span>
            style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> <span class="token literal-property property">marginRight</span><span class="token operator">:</span> <span class="token string">'10px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">'primary'</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>handleBtnClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            提交
          <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>List
          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'300px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
          bordered
          dataSource<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>list<span class="token punctuation">}</span>
          renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item
              onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">handleItemDelete</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>item<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoListUI<span class="token punctuation">;</span>
</code></pre></div><p>继续，我们来改造 <code>TodoList.js</code> 文件的内容。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  getInputChangeAction<span class="token punctuation">,</span>
  getAddItemAction<span class="token punctuation">,</span>
  getDeleteItemAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store/actionCreators'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TodoListUI <span class="token keyword">from</span> <span class="token string">'./TodoListUI'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleInputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleStoreChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleStoreChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleBtnClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleItemDelete <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleItemDelete</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleStoreChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>TodoListUI
        inputValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span>
        list<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span>
        handleInputChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span>
        handleBtnClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick<span class="token punctuation">}</span>
        handleItemDelete<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleItemDelete<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getInputChangeAction</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleStoreChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getAddItemAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleItemDelete</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getDeleteItemAction</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><p>大家可以看到，我们把页面的内容给单独抽离出来放到 <code>TodoListUI.js</code> 文件当中，让它只做渲染这一件事情。这样，我们就成功的把 <code>UI</code> 组件和逻辑组件进行拆分。</p> <h2 id="_2、无状态组件"><a href="#_2、无状态组件" class="header-anchor">#</a> 2、无状态组件</h2> <p>有了 <code>UI</code> 组件之后，我们再来看另外一种组件，<strong>无状态组件</strong>。所谓<strong>无状态组件</strong>，就是整个页面<strong>什么逻辑都没有</strong>，只有一个 <code>render</code> 函数时，我们可以把它称之为是一个无状态组件。</p> <p>那无状态组件怎么定义呢？？</p> <p>我们可以定义一个函数，这个函数接收一个参数，<code>props</code> 。 <code>TodoListUI.js</code> 文件的具体代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">TodoListUI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> <span class="token literal-property property">marginLeft</span><span class="token operator">:</span> <span class="token string">'10px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Input
          value<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span>
          placeholder<span class="token operator">=</span><span class="token string">'todo info'</span>
          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> <span class="token literal-property property">marginRight</span><span class="token operator">:</span> <span class="token string">'10px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
          onChange<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Button type<span class="token operator">=</span><span class="token string">'primary'</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>handleBtnClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          提交
        <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>List
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">marginTop</span><span class="token operator">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'300px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
        bordered
        dataSource<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>list<span class="token punctuation">}</span>
        renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>List<span class="token punctuation">.</span>Item
            onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              props<span class="token punctuation">.</span><span class="token function">handleItemDelete</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>item<span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>List<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoListUI<span class="token punctuation">;</span>
</code></pre></div><p>当一个普通函数只有 <code>render</code> 函数的时候，我们完全可以通过一个<strong>无状态的组件</strong>来替换掉这个普通的组件。那为什么要做这样子的替换呢？</p> <p>如果我们改造为<strong>只有一个函数</strong>的时候，那么程序就只需要去运行这个函数，也只需要做这一件事情。换言之，如果我们用 <code>class</code> 的话，那么它的类背后是一个对象，而这个对象又有很多的生命周期函数等等，这就显得没有那么纯粹了。因此，我们定义<strong>无状态组件</strong>这样的方式，来让组件更加地纯正。</p> <h1 id="🎩-八、redux-发起异步请求"><a href="#🎩-八、redux-发起异步请求" class="header-anchor">#</a> 🎩 八、Redux 发起异步请求</h1> <h2 id="_1、redux-中发送异步请求数据"><a href="#_1、redux-中发送异步请求数据" class="header-anchor">#</a> 1、Redux 中发送异步请求数据</h2> <p>往往在实际的项目中，我们总是需要去和后端请求接口数据并发送 <code>AJAX</code> 请求。那想要在 <code>react</code> 中请求到后端接口数据，该怎么处理呢？</p> <p>首先我们在 <code>TodoList.js</code> 下面，来请求数据。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  getInputChangeAction<span class="token punctuation">,</span>
  getAddItemAction<span class="token punctuation">,</span>
  getDeleteItemAction<span class="token punctuation">,</span>
  initListAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store/actionCreators'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./list.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
      <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">initListAction</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接着，修改 <code>actionTypes.js</code> 代码。<strong>具体如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CHANGE_INPUT_VALUE</span> <span class="token operator">=</span> <span class="token string">'change_input_value'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ADD_TODO_ITEM</span> <span class="token operator">=</span> <span class="token string">'add_todo_item'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DELETE_TODO_ITEM</span> <span class="token operator">=</span> <span class="token string">'delete_todo_item'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">INIT_LIST_ACTION</span> <span class="token operator">=</span> <span class="token string">'init_list_action'</span><span class="token punctuation">;</span>
</code></pre></div><p>继续，我们在 <code>actionCreators.js</code> 中对封装 <code>action</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
  <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token constant">INIT_LIST_ACTION</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getInputChangeAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> value<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getAddItemAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getDeleteItemAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token literal-property property">index</span><span class="token operator">:</span> index<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">initListAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">INIT_LIST_ACTION</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>最后，修改 <code>reducer.js</code> 代码。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
  <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token constant">INIT_LIST_ACTION</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultStore <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// reducer 可以接收state，但是绝不能修改state</span>
<span class="token keyword">const</span> <span class="token function-variable function">reducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultStore<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">INIT_LIST_ACTION</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list <span class="token operator">=</span> action<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newState<span class="token punctuation">.</span>inputValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> reducer<span class="token punctuation">;</span>
</code></pre></div><p>由此，我们就实现了通过 <code>axios</code> 的方式来发布 <code>AJAX</code> 请求，请让其获取到数据。</p> <h2 id="_2、redux-thunk-中间件"><a href="#_2、redux-thunk-中间件" class="header-anchor">#</a> 2、Redux-thunk 中间件</h2> <h3 id="_1-解决什么问题"><a href="#_1-解决什么问题" class="header-anchor">#</a> （1）解决什么问题</h3> <p>在上面的例子中，我们成功地对接口的数据发起了请求。上面这种情况是属于比较简单的例子，但是往往在实际场景中我们遇到的，都是比较复杂的例子。</p> <p>因此，我们希望的是，当遇到<strong>异步请求</strong>或者是<strong>有着非常复杂逻辑</strong>的时候，把它移出到其他文件下进行管理。</p> <p>那这个时候就需要用到 <strong><code>Redux-thunk</code> 中间件</strong>来进行问题解决。接下来我们来看下 <strong><code>Redux-thunk</code> 中间件</strong>如何使用？</p> <h3 id="_2-如何使用"><a href="#_2-如何使用" class="header-anchor">#</a> （2）如何使用</h3> <p><strong>第一步：</strong> 安装 <code>redux-thunk</code> 。<strong>具体命令如下：</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i redux-thunk -D
</code></pre></div><p><strong>第二步：</strong> 引入 <code>redux-thunk</code> 。往往我们在实际调试中，都会受用 <code>redux-devtools</code> 去对项目的 <code>store</code> 进行调试。但如果我们既要引入 <code>redux-devtools</code> ，又要引入 <code>redux-thunk</code> 中间件，该怎么处理呢？在 <code>store|index.js</code> 文件中进行处理。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// compose函数来自于redux中</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware<span class="token punctuation">,</span> compose <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span> window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__
  <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token operator">:</span> compose<span class="token punctuation">;</span>

<span class="token keyword">const</span> enhancer <span class="token operator">=</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> enhancer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><p>通过这种形式的编码，使得我们的 <code>store</code> <strong>既支持</strong> <code>windows</code> 下的 <code>devtools</code> ，也就是可以去调试 <code>store</code> ，<strong>又可以</strong>成功的引入 <code>redux-thunk</code> 。</p> <p><strong>第三步：</strong> 将异步逻辑进行抽离。先来修改 <code>TodoList.js</code> 的代码。<strong>具体如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  getTodoList<span class="token punctuation">,</span>
  getInputChangeAction<span class="token punctuation">,</span>
  getAddItemAction<span class="token punctuation">,</span>
  getDeleteItemAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store/actionCreators'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里的action是一个函数</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getTodoList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 只有用了thunk，action才能是用函数的形式去进行传递</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接着，修改 <code>actionCreators.js</code> 的代码。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// getTodoList 是一个函数</span>
<span class="token comment">// 以这种形式生成的函数，可以直接接收dispatch方法</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getTodoList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./list.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
      <span class="token comment">// 这里的 action 是一个对象</span>
      <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">initListAction</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>下面，我们来解释下上面这两段代码，<strong>具体如下：</strong></p> <p>配置好 <code>redux-thunk</code> 的环境之后，它使得我们可以在 <code>action</code> 里面，写异步的代码了！为什么这么说呢？</p> <ul><li>以前我们在创建 <code>action</code> 时，只能是一个<strong>JS 对象</strong>，而现在，当使用了 <code>redux-thunk</code> 之后，即使 <code>getTodoList()</code> 返回的<strong>不是</strong>一个对象<strong>而是</strong>一个函数，也可以通过 <code>store.dispatch()</code> 的方式，把函数发送给到 <code>store</code> 了。</li> <li>那为什么能够把<strong>函数</strong>给发送出去呢？就是因为用了 <code>redux-thunk</code> 。</li></ul> <p>继续，我们要谈论<strong>具体的实现步骤 👇：</strong></p> <ul><li>首先让 <code>TodoList.js</code> 中的 <code>store</code> ，去执行 <code>action</code> 函数。而这个 <code>action</code> 函数，来自于 <code>actionCreators.js</code> 中的 <code>getTodoList()</code> 。</li> <li>对于 <code>getTodoList()</code> 来说，它要做的事情是去<strong>请求 json 的数据</strong>和<strong>获取 json 的数据</strong>。</li> <li>而获取好了数据之后，接下来，要改变 <code>store</code> 里面的数据，那么要先去创建一个 <code>action</code> ，这个 <code>action</code> 用来提供给 <code>store.dispatch()</code> 进行调用。但是呢， <code>store.dispatch()</code> 要怎么去获取呢？我们所返回的那个函数中，就会自动地接收到 <code>store.dispatch()</code> 方法。所以，只要通过 <code>dispatch(action)</code> ，将 <code>action</code> 给派发出去就可以了。</li> <li>也就是说， <code>redux-thunk</code> 使得我们去创建 <code>action</code> 或者支持 <code>action</code> 时，是一个<strong>函数</strong>的形式。</li></ul> <h3 id="_3-为什么要使用-redux-thunk"><a href="#_3-为什么要使用-redux-thunk" class="header-anchor">#</a> （3）为什么要使用 redux-thunk ？</h3> <p>看完上面的解释之后，相信大家也就知道 <code>redux-thunk</code> 的奇妙之处了。那为什么要使用 <code>redux-thunk</code> 呢？👇</p> <p>如果把异步函数放在<strong>组件的生命周期</strong>中来使用的话，那么这个<strong>组件的逻辑就会变得越来越复杂</strong>，组件的内容也会变得越来越多。因此，我们通常就会把这种复杂的异步逻辑给<strong>拆分出去进行单独管理</strong>。那么现在，我们就借助 <code>redux-thunk</code> 中间件，把异步逻辑给拆分到 <code>actionCreators.js</code> 去进行单独管理。由此，使得代码更加规范和统一。</p> <h3 id="_4-什么是-redux-thunk-中间件"><a href="#_4-什么是-redux-thunk-中间件" class="header-anchor">#</a> （4）什么是 Redux-thunk 中间件？</h3> <p>在有了上面内容的铺垫之后，接下来，我们返回到中间件的源头，来谈谈 <code>Redux-thunk</code> 中间件的原理。</p> <p>所谓<strong>中间件</strong>，肯定就是说是谁和谁的中间。<strong>我们先来看一张图：</strong></p> <p><img src="https://img-blog.csdnimg.cn/a355976395e94617be4bb76a7d6add72.png#pic_center" alt="Redux Data Flow"></p> <p><code>Redux</code> 中间件的这个<strong>中间</strong>，指的是 <code>action</code> 和 <code>store</code> 之间。</p> <p>之前我们说过，在 <code>redux</code> 中， <code>action</code> 只能是一个对象，就因为它是对象，因此直接把它派发给 <code>store</code> 。现在，当我们使用了 <code>redux-thunk</code> 之后， <code>action</code> 就可以是函数了。那为什么可以是函数呢？</p> <p>看上面的图中不难发现， <code>action</code> 通过 <code>dispatch</code> 的方法，将数据递交给了 <code>store</code> 。且 <code>action</code> 和 <code>store</code> 之间，是一个 <code>dispatch</code> 方法，那我们说的中间件 <code>middleware</code> ，实际上就是<strong>对 dispatch 方法的封装和升级</strong>。</p> <p>对于最原始的 <code>dispatch</code> 方法来说，它会接收到一个 <strong>JS 对象</strong>并将其传递给 <code>store</code> 。</p> <p>但如果我们传递的是一个 <strong>函数</strong> 的话，那么这个 <code>dispatch</code> 就升级了。 <code>dispatch</code> 不会直接把函数传递给 <code>store</code> ，它会通过 <code>redux-thunk</code> 中间件的方式，先执行对应的函数，等执行到需要调用 <code>store</code> 的时候，再去调用 <code>store</code> 。</p> <h1 id="💼-九、redux-的其他中间件"><a href="#💼-九、redux-的其他中间件" class="header-anchor">#</a> 💼 九、Redux 的其他中间件</h1> <h2 id="_1、redux-logger"><a href="#_1、redux-logger" class="header-anchor">#</a> 1、Redux-logger</h2> <p><code>redux</code> 的中间件非常的多，比如 <code>redux-logger</code> 可以记录 <code>action</code> 每一次派发的日志。那它怎么记录呢？</p> <p>它在每一次调用 <code>action</code> 的时候，会通过 <code>dispatch</code> 方法把 <code>action</code> 传递给 <code>store</code> ，之后呢，我们可以对 <code>dispatch</code> 做一个升级，让 <code>dispatch</code> 不仅把 <code>action</code> 传递给 <code>store</code> ，而且在每一次传递之前，我们还通过 <code>console.log</code> 的方式将其打印出来，这样的话，我们就写了一个 <code>redux-logger</code> 的中间件， 它可以在我们派发 <code>action</code> 的时候，把 <code>action</code> 打印在我们的<strong>控制台</strong>里面。</p> <h2 id="_2、redux-saga"><a href="#_2、redux-saga" class="header-anchor">#</a> 2、Redux-saga</h2> <h3 id="_1-redux-saga-是什么"><a href="#_1-redux-saga-是什么" class="header-anchor">#</a> （1）Redux-saga 是什么</h3> <p>在现如今的项目中，用的比较火的中间件不仅有 <code>redux-thunk</code> ， <code>redux-logger</code> ，还有 <code>reudx-saga</code> 的使用范围也非常的广。</p> <p><code>reudx-saga</code> 也是解决 <code>react</code> 中<strong>异步问题</strong>的一个中间件，不同于 <code>redux-thunk</code> 的是， <code>redux-thunk</code> 采用的是把<strong>异步操作</strong>放到 <code>action</code> 里面去操作。而 <strong>redux-saga 采用的设计思想是</strong>，<u>单独地把异步逻辑拆分出来，放到另一个文件中去进行管理</u>。那 <code>redux-saga</code> 这个中间件该如何使用呢？</p> <h3 id="_2-redux-saga-如何使用"><a href="#_2-redux-saga-如何使用" class="header-anchor">#</a> （2）Redux-saga 如何使用</h3> <p>我们把上面的 <code>TodoList</code> 组件进行升级改造。首先是 <code>store|index.js</code> 文件。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware<span class="token punctuation">,</span> compose <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> createSagaMiddleware <span class="token keyword">from</span> <span class="token string">'redux-saga'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> todoSagas <span class="token keyword">from</span> <span class="token string">'./sagas'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> sagaMiddleware <span class="token operator">=</span> <span class="token function">createSagaMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span> window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__
  <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token operator">:</span> compose<span class="token punctuation">;</span>
<span class="token keyword">const</span> enhancer <span class="token operator">=</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span><span class="token function">sagaMiddleware</span><span class="token punctuation">(</span>sagaMiddleware<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> enhancer<span class="token punctuation">)</span><span class="token punctuation">;</span>
sagaMiddleware<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>todoSagas<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><p>在这个文件当中，主要是要把基础配置做好。那这里主要有几个要注意的点是：</p> <ul><li>引入 <code>createSagaMiddleware</code> ；</li> <li>之后是使用 <code>const sagaMiddleware = createSagaMiddleware()</code> 将其进行引入；</li> <li>使用 <code>apllyMiddleware</code> 去使用这个中间件；</li> <li>使用完中间件之后，我们又创建了 <code>saga.js</code> 。</li></ul> <hr> <p>接下来我们在 <code>store</code> 文件夹下创建 <code>saga.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> takeEvery<span class="token punctuation">,</span> put <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga/effects'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> initListAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionCreators'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">GET_INIT_LIST</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getInitList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">yield</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'./list.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">initListAction</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'list.json网络请求失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">mySaga</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 通过takeEvery去捕获到每一次派发下来的action</span>
  <span class="token keyword">yield</span> <span class="token function">takeEvery</span><span class="token punctuation">(</span><span class="token constant">GET_INIT_LIST</span><span class="token punctuation">,</span> getInitList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> mySaga<span class="token punctuation">;</span>
</code></pre></div><p>对于 <code>saga.js</code> 来说，有几个要注意的点是：</p> <ul><li>在 <code>saga.js</code> 里面，一定要导出一个 <code>generator</code> 函数，在这个函数里面，我们写了一些逻辑。逻辑是，当我们接收到的 <code>action</code> 类型是 <code>GET_INIT_LIST</code> 时，那么我们就会去执行 <code>getInitList</code> 这个方法。</li> <li><code>getInitList()</code> 方法是一个函数，它将会去帮我们取数据，取完数据之后，再将这个数据创建出来一个新的 <code>action</code> ，并将这个 <code>action</code> 通过 <code>yield put(action)</code> 的方式，派发给 <code>store</code> 。</li></ul> <hr> <p>下面我们来看 <code>actionTypes.js</code> 中的内容。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// CHANGE_INPUT_VALUE、ADD_TODO_ITEM、DELETE_TODO_ITEM、INIT_LIST_ACTION</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">GET_INIT_LIST</span> <span class="token operator">=</span> <span class="token string">'get_init_list'</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p>接着，我们来到 <code>TodoList.js</code> 。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  getInputChangeAction<span class="token punctuation">,</span>
  getAddItemAction<span class="token punctuation">,</span>
  getDeleteItemAction<span class="token punctuation">,</span>
  getInitList<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store/actionCreators'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 此处省略n多内容</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getInitList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><p>最后是 <code>store|actionCreators.js</code> 。具体代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token constant">GET_INIT_LIST</span><span class="token punctuation">,</span>
  <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
  <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
  <span class="token constant">INIT_LIST_ACTION</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span><span class="token punctuation">;</span>

<span class="token comment">// 此处省略n多内容</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getInitList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token constant">GET_INIT_LIST</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在 <code>TodoList.js</code> 中，我们创建了一个 <code>action</code> ，并将这个 <code>action</code> 派发给 <code>store</code> 。</p> <h1 id="🛵-十、react-redux"><a href="#🛵-十、react-redux" class="header-anchor">#</a> 🛵 十、React-Redux</h1> <h2 id="_1、react-redux-是什么"><a href="#_1、react-redux-是什么" class="header-anchor">#</a> 1、React-Redux 是什么</h2> <p>在学习了 <code>react</code> 之后，紧接着，我们学习了 <code>redux</code> 。那如果把它们俩结合起来， <code>react-redux</code> 是什么呢？</p> <p>实际上，它是一个<strong>第三方模块</strong>，它使得我们在 <code>react</code> 中更加方便地使用 <code>redux</code> 。</p> <h2 id="_2、react-redux-的使用"><a href="#_2、react-redux-的使用" class="header-anchor">#</a> 2、React-Redux 的使用</h2> <h3 id="_1-安装-react-redux"><a href="#_1-安装-react-redux" class="header-anchor">#</a> （1）安装 React-Redux</h3> <p>同样地，我们以 <code>TodoList</code> 组件为例，来看下 <code>react-redux</code> 的使用。首先新创建一个 <code>react</code> 项目，同时安装 <code>react-redux</code> 。<strong>具体命令如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>npm install react<span class="token operator">-</span>redux
</code></pre></div><h3 id="_2-项目目录"><a href="#_2-项目目录" class="header-anchor">#</a> （2）项目目录</h3> <p>下面先来看项目目录。<strong>具体如下图：</strong></p> <p><img src="https://img-blog.csdnimg.cn/3d0fcfe127324706a94bfe9ed61257b8.png#" alt="在这里插入图片描述"></p> <h3 id="_3-核心内容"><a href="#_3-核心内容" class="header-anchor">#</a> （3）核心内容</h3> <p><strong>第一步</strong>，将 <code>TodoList</code> 组件挂载到页面上。<code>src|index.js</code> 文件下的内容如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TodoList <span class="token keyword">from</span> <span class="token string">'./TodoList'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token comment">// 表示Provider里面所有的组件，都有能力获取到store</span>
  <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>TodoList <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>App<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>Provider</code> 是 <code>react</code> 提供的第一个核心 <code>API</code> ，它旨在表明， <code>Provider</code> 里面所有的组件，都有能力获取到 <code>store</code> 。</p> <hr> <p><strong>第二步</strong>，编写 <code>src|TodoList.js</code> 的内容。<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">TodoList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> inputValue<span class="token punctuation">,</span> list<span class="token punctuation">,</span> changeInputValue<span class="token punctuation">,</span> handleClick<span class="token punctuation">,</span> handleDelete <span class="token punctuation">}</span> <span class="token operator">=</span>
    props<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>inputValue<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>changeInputValue<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>提交<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>li onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleDelete<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span><span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>item<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">inputValue</span><span class="token operator">:</span> state<span class="token punctuation">.</span>inputValue<span class="token punctuation">,</span>
    <span class="token literal-property property">list</span><span class="token operator">:</span> state<span class="token punctuation">.</span>list<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// store, dispatch, props</span>
<span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function">changeInputValue</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'change_input_value'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// console.log(action.value)</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'add_item'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 让我们的TodoList和store做连接</span>
<span class="token comment">// TodoList是一个UI组件，connect把这个UI组件和前边的业务逻辑相结合，可以把前面括号的内容称为是容器组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>TodoList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在上面的代码中，我们要注意的是 <code>react-redux</code> 中的 <code>connect</code> 。</p> <p><code>connect</code> 表示的是连接，那么是<strong>谁和谁做连接呢</strong>？ <code>TodoList</code> 和 <code>store</code> 做连接。它们俩做连接需要一个<strong>映射关系</strong>，这个映射关系就在 <code>mapStateToProps</code> 里面。</p> <p>在 <code>mapStateToProps</code> 中， <code>state</code> 指的是 <code>store</code> 里面的数据，那 <code>store</code> 里面的数据，就把它映射到 <code>props</code> 里面，之后我们就可以通过 <code>this.props.xxx</code> 的方式，去获取到 <code>store</code> 里面的数据。</p> <hr> <p><strong>第三步</strong>，创建 <code>reducer</code> 。在 <code>src|store|reducer.js</code> 下进行编写，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'change_input_value'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'add_item'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newState<span class="token punctuation">.</span>inputValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>将 <code>store</code> 中的数据给放到 <code>reducer</code> 当中去进行记录。</p> <hr> <p><strong>第四步</strong>，将 <code>reducer</code> 传给 <code>store</code> 。在 <code>src|store|index.js</code> 下进行编写，<strong>具体代码如下：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><p>我们将 <code>reducer</code> 中存放的内容进行深拷贝，并把它传回给 <code>store</code> 。这样，就形成了一个数据传递的闭环。</p> <hr> <p>最后，我们来看一下浏览器显示的效果：</p> <p><img src="https://img-blog.csdnimg.cn/dab2e2d144c24bb691a4a93b776dfe67.gif#pic_center" alt="React-Redux"></p> <p>相比于使用中间件来说， <code>React-Redux</code> 的使用更加地<strong>直观</strong>和<strong>简洁</strong>。在实际项目中，不管是 <code>redux</code> 中间件，还是 <code>react-redux</code> ，都值得拿来做状态管理。</p> <p>那么要注意的是，<code>redux</code> 中间件和 <code>react-redux</code> 之间，各自在使用过程中<strong>不同的点</strong>，区分好即可。至于在项目中<strong>使用哪一种类型</strong>，就<strong>依据当下的项目场景</strong>去决定就好啦！</p> <h1 id="🚦-十一、结束语"><a href="#🚦-十一、结束语" class="header-anchor">#</a> 🚦 十一、结束语</h1> <p>在上面的文章中，我们讲解了 <code>Redux</code> 设计和使用的三项原则，同时，也讲解了 <code>Redux</code> 中的一些核心 <code>API</code> 。除此之外呢，我们还学习了 <code>redux</code> 的中间件， <code>redux-thunk</code> 和 <code>redux-saga</code> 。同时，还学习了另外一个做状态管理的内容， <code>react-redux</code> 。</p> <p>到这里，关于 <code>redux</code> 的内容就介绍完毕啦！不知道大家是否对 <code>redux</code> 又有了新的了解呢？</p> <h1 id="🐣-彩蛋-one-more-thing"><a href="#🐣-彩蛋-one-more-thing" class="header-anchor">#</a> 🐣 彩蛋 One More Thing</h1> <h2 id="往期推荐"><a href="#往期推荐" class="header-anchor">#</a> （：往期推荐</h2> <p>👉<a href="https://juejin.cn/post/7018019363139616805" target="_blank" rel="noopener noreferrer">初探 react，用 react 实现一个 todoList 功能<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>👉<a href="https://juejin.cn/post/7020631362142994469" target="_blank" rel="noopener noreferrer">react 只停留在表层？五大知识点带你梳理进阶知识<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="番外篇"><a href="#番外篇" class="header-anchor">#</a> （：番外篇</h2> <ul><li>关注公众号<strong>星期一研究室</strong>，第一时间关注优质文章，更有 <strong>「offer 来了」面试专栏</strong> 待你解锁~</li> <li>如果您觉得这篇文章有帮助到您的的话不妨点赞支持一下哟~~😉</li> <li>以上就是本文的全部内容！我们下期见！👋👋👋</li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/14/2022, 4:10:56 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/mondaylab-blog/column/FrontEnd/React/002.html" class="prev">
            002-react进阶知识
          </a></span> <span class="next"><a href="/mondaylab-blog/column/FrontEnd/React/004.html">
            004-react的基本使用和高级特性
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#🌂-序言" class="sidebar-link reco-side-🌂-序言" data-v-cb1513f6>🌂 序言</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#☂️-一、基础知识" class="sidebar-link reco-side-☂️-一、基础知识" data-v-cb1513f6>☂️ 一、基础知识</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、redux-概念简述" class="sidebar-link reco-side-_1、redux-概念简述" data-v-cb1513f6>1、Redux 概念简述</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、redux-的工作流程" class="sidebar-link reco-side-_2、redux-的工作流程" data-v-cb1513f6>2、Redux 的工作流程</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#🎃-二、使用-antd-实现-todolist-页面布局" class="sidebar-link reco-side-🎃-二、使用-antd-实现-todolist-页面布局" data-v-cb1513f6>🎃 二、使用 Antd 实现 TodoList 页面布局</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、在项目中使用-antd" class="sidebar-link reco-side-_1、在项目中使用-antd" data-v-cb1513f6>1、在项目中使用 Antd</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、使用-antd-实现-todolist-的基本布局" class="sidebar-link reco-side-_2、使用-antd-实现-todolist-的基本布局" data-v-cb1513f6>2、使用 Antd 实现 TodoList 的基本布局</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_3、创建-redux-中的-store" class="sidebar-link reco-side-_3、创建-redux-中的-store" data-v-cb1513f6>3、创建 redux 中的 store</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1-创建-store" class="sidebar-link reco-side-_1-创建-store" data-v-cb1513f6>（1）创建 store</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2-在项目中使用-store" class="sidebar-link reco-side-_2-在项目中使用-store" data-v-cb1513f6>（2）在项目中使用 store</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#🧵-三、action-和-reducer-的编写-增添功能" class="sidebar-link reco-side-🧵-三、action-和-reducer-的编写-增添功能" data-v-cb1513f6>🧵 三、Action 和 Reducer 的编写 - 增添功能</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、主体页面内容改造" class="sidebar-link reco-side-_1、主体页面内容改造" data-v-cb1513f6>1、主体页面内容改造</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、改变-action-中的数据" class="sidebar-link reco-side-_2、改变-action-中的数据" data-v-cb1513f6>2、改变 action 中的数据</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_3、store-数据改造" class="sidebar-link reco-side-_3、store-数据改造" data-v-cb1513f6>3、store 数据改造</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#🧶-四、使用-redux-实现-todolist-的删除功能" class="sidebar-link reco-side-🧶-四、使用-redux-实现-todolist-的删除功能" data-v-cb1513f6>🧶 四、使用 Redux 实现 TodoList 的删除功能</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、对组件进行事件绑定" class="sidebar-link reco-side-_1、对组件进行事件绑定" data-v-cb1513f6>1、对组件进行事件绑定</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、在-reducer-中进行数据通信" class="sidebar-link reco-side-_2、在-reducer-中进行数据通信" data-v-cb1513f6>2、在 reducer 中进行数据通信</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#👓-五、逻辑归纳" class="sidebar-link reco-side-👓-五、逻辑归纳" data-v-cb1513f6>👓 五、逻辑归纳</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、actiontypes-的拆分" class="sidebar-link reco-side-_1、actiontypes-的拆分" data-v-cb1513f6>1、ActionTypes 的拆分</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、使用-actioncreator-统一创建-action" class="sidebar-link reco-side-_2、使用-actioncreator-统一创建-action" data-v-cb1513f6>2、使用 actionCreator 统一创建 action</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#👔-六、redux-的一些总结" class="sidebar-link reco-side-👔-六、redux-的一些总结" data-v-cb1513f6>👔 六、Redux 的一些总结</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、redux-设计和使用的三项原则" class="sidebar-link reco-side-_1、redux-设计和使用的三项原则" data-v-cb1513f6>1、Redux 设计和使用的三项原则</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、redux-的核心-api" class="sidebar-link reco-side-_2、redux-的核心-api" data-v-cb1513f6>2、Redux 的核心 API</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#👝-七、进阶组件的拆分" class="sidebar-link reco-side-👝-七、进阶组件的拆分" data-v-cb1513f6>👝 七、进阶组件的拆分</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、ui-组件和容器组件的拆分" class="sidebar-link reco-side-_1、ui-组件和容器组件的拆分" data-v-cb1513f6>1、UI 组件和容器组件的拆分</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、无状态组件" class="sidebar-link reco-side-_2、无状态组件" data-v-cb1513f6>2、无状态组件</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#🎩-八、redux-发起异步请求" class="sidebar-link reco-side-🎩-八、redux-发起异步请求" data-v-cb1513f6>🎩 八、Redux 发起异步请求</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、redux-中发送异步请求数据" class="sidebar-link reco-side-_1、redux-中发送异步请求数据" data-v-cb1513f6>1、Redux 中发送异步请求数据</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、redux-thunk-中间件" class="sidebar-link reco-side-_2、redux-thunk-中间件" data-v-cb1513f6>2、Redux-thunk 中间件</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1-解决什么问题" class="sidebar-link reco-side-_1-解决什么问题" data-v-cb1513f6>（1）解决什么问题</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2-如何使用" class="sidebar-link reco-side-_2-如何使用" data-v-cb1513f6>（2）如何使用</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_3-为什么要使用-redux-thunk" class="sidebar-link reco-side-_3-为什么要使用-redux-thunk" data-v-cb1513f6>（3）为什么要使用 redux-thunk ？</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_4-什么是-redux-thunk-中间件" class="sidebar-link reco-side-_4-什么是-redux-thunk-中间件" data-v-cb1513f6>（4）什么是 Redux-thunk 中间件？</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#💼-九、redux-的其他中间件" class="sidebar-link reco-side-💼-九、redux-的其他中间件" data-v-cb1513f6>💼 九、Redux 的其他中间件</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、redux-logger" class="sidebar-link reco-side-_1、redux-logger" data-v-cb1513f6>1、Redux-logger</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、redux-saga" class="sidebar-link reco-side-_2、redux-saga" data-v-cb1513f6>2、Redux-saga</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1-redux-saga-是什么" class="sidebar-link reco-side-_1-redux-saga-是什么" data-v-cb1513f6>（1）Redux-saga 是什么</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2-redux-saga-如何使用" class="sidebar-link reco-side-_2-redux-saga-如何使用" data-v-cb1513f6>（2）Redux-saga 如何使用</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#🛵-十、react-redux" class="sidebar-link reco-side-🛵-十、react-redux" data-v-cb1513f6>🛵 十、React-Redux</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1、react-redux-是什么" class="sidebar-link reco-side-_1、react-redux-是什么" data-v-cb1513f6>1、React-Redux 是什么</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2、react-redux-的使用" class="sidebar-link reco-side-_2、react-redux-的使用" data-v-cb1513f6>2、React-Redux 的使用</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_1-安装-react-redux" class="sidebar-link reco-side-_1-安装-react-redux" data-v-cb1513f6>（1）安装 React-Redux</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_2-项目目录" class="sidebar-link reco-side-_2-项目目录" data-v-cb1513f6>（2）项目目录</a></li><li class="level-3" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#_3-核心内容" class="sidebar-link reco-side-_3-核心内容" data-v-cb1513f6>（3）核心内容</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#🚦-十一、结束语" class="sidebar-link reco-side-🚦-十一、结束语" data-v-cb1513f6>🚦 十一、结束语</a></li><li class="level-1" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#🐣-彩蛋-one-more-thing" class="sidebar-link reco-side-🐣-彩蛋-one-more-thing" data-v-cb1513f6>🐣 彩蛋 One More Thing</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#往期推荐" class="sidebar-link reco-side-往期推荐" data-v-cb1513f6>（：往期推荐</a></li><li class="level-2" data-v-cb1513f6><a href="/mondaylab-blog/column/FrontEnd/React/003.html#番外篇" class="sidebar-link reco-side-番外篇" data-v-cb1513f6>（：番外篇</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/mondaylab-blog/assets/js/app.7012c839.js" defer></script><script src="/mondaylab-blog/assets/js/3.88ba4622.js" defer></script><script src="/mondaylab-blog/assets/js/1.4561d677.js" defer></script><script src="/mondaylab-blog/assets/js/46.fcc888d9.js" defer></script>
  </body>
</html>
